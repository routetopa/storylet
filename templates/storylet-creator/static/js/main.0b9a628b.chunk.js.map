{"version":3,"sources":["components/info.js","components/helpers.js","reducer/actions/select-language.js","reducer/actions/set-storylet.js","components/menu.js","components/container/header-container.js","components/slide-components/text.js","components/slide-components/image.js","style/slide.js","reducer/actions/select-component.js","components/slide.js","reducer/actions/select-slide.js","components/container/slide-container.js","components/container/wordcloud-container.js","components/container/rhymebrain-container.js","components/container/babelnet-container.js","components/container/word-container.js","components/CustomFormInput/AntUpload.js","components/image-gallery.js","reducer/actions/set-slides-data.js","components/container/menu-container.js","components/container/stage-container.js","reducer/actions/copy-component.js","components/properties.js","components/container/properties-container.js","components/container/body-container.js","components/moveable/moveable-component.js","StoryletCreator.js","reducer/storylet.js","reducer/slides-data.js","reducer/selected-slide.js","reducer/selected-component.js","reducer/copied-component.js","reducer/selected-language.js","reducer/index.js","index.js"],"names":["Info","hideSettings","className","onClick","icon","faInfoCircle","translate","text","ul","ln","selectLanguage","data","type","payload","setStorylet","Menu","dispatch","useDispatch","useState","menuStatus","setMenuStatus","autosave","setAutosave","language","setLanguage","selectedLanguage","useSelector","state","slidesData","storylet","openNotificationWithIcon","notification","message","description","useEffect","languageSelected","url_string","window","location","href","URL","searchParams","get","navigator","split","indexOf","save_storylet","exit","axios","put","API_ENDPOINT","SAVE_STORYLET","storyletid","STORY","DATA","id","story","metadata","then","response","STATIC","EXIT_URL","error","console","log","faBars","checked","size","onChange","cloneDeep","batch","value","Option","placement","title","onConfirm","e","onCancel","okText","cancelText","HeaderContainer","Text","component","isEditable","balloonFontSize","fontSize","w","TextComponent","styled","div","props","y","x","h","scale","rotate","zIndex","fontFamily","color","fontWeight","fontStyle","textDecoration","textAlign","backgroundColor","balloon","index","dangerouslySetInnerHTML","__html","Image","style","top","left","width","height","transform","src","alt","SlideStyle","isSettingVisible","background","cursor","selected","selectComponent","Slide","parameters","components","map","c","idx","key","componentSelected","selectSlide","SlideContainer","selectedSlide","slide","WordcloudContainer","startingWord","colors","noun","adjective","verb","adverb","words","setWords","selectedWords","setSelectedWords","clickedWord","setClickedWord","wordAssociations","searchKey","items","i","length","push","item","weight","pos","slice","span","temp","splice","temp2","goToWordAssociations","ReactDOM","render","document","getElementById","callbacks","getWordColor","word","getWordTooltip","onWordClick","getCallback","onWordMouseOut","onWordMouseOver","callback","event","isActive","element","target","select","on","attr","options","fontSizes","rotations","rotationAngles","padding","transitionDuration","RhymebrainContainer","dataSource","setDataSource","columns","dataIndex","sorter","a","b","localeCompare","score","syllables","rowKey","BabelnetContainer","lang","properties","fullLemma","lemma","searchLang","targetLang","source","synsetIds","_dataSource","synsetID","getSenses","gloss","setGloss","record","onRow","rowIndex","currentTarget","dataset","senses","frequency","glosses","onDoubleClick","onContextMenu","onMouseEnter","onMouseLeave","WordContainer","coverContainer","useRef","selectedTab","setSelectedTab","selectTab","_targetInst","current","visibility","ref","faTimes","faLightbulb","AntUpload","name","max","_fileList","setFileList","_previewVisible","setPreviewVisible","_previewImage","setPreviewImage","runnedOnce","isFile","fl","Array","isArray","forEach","f","uid","url","global","base_path","handlePreview","file","preview","getBase64","originFileObj","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","uploadButton","PlusOutlined","fileList","multiple","onPreview","customRequest","onSuccess","setTimeout","listType","visible","footer","ImageGallery","isOpened","closeGallery","bg1","path","IMAGE_BASE_PATH","_id","bg2","fantastic_characters","sea_life","images","setImages","selectedGallery","setSelectedGallery","selectedColor","setSelectedColor","selectedImg","setSelectedImg","uploads","RESOURCES","IMAGES","hasUploads","Select","isSelected","handleItemClick","bodyStyle","maxHeight","overflowX","onOk","defaultValue","getOptions","gutter","CheckOutlined","content","onChangeComplete","rgb","r","g","trigger","BgColorsOutlined","backgroundImage","setSlidesData","MenuContainer","selectedComponent","slideIdx","setSlideIdx","setStartingWord","setIsOpened","imagesType","setImagesType","undoPointer","setUndoPointer","play_story","open","SITE_URL","get_words","add_text","isBalloon","open_gallery","update_slides_index","removeEventListener","undo_redo","addEventListener","history","HISTORY","shift","which","keyCode","ctrl","ctrlKey","data-tooltip","faFont","faComment","faFileImage","faImage","faUndo","faRedo","faPlay","faArrowAltCircleUp","tmp","goto","faArrowAltCircleDown","faTrashAlt","alert","faCopy","cloned_node","Math","random","toString","substr","toUpperCase","faPlusCircle","placeholder","onKeyPress","undefined","StageContainer","copiedComponent","add_component","copyComponent","Properties","startIndex","selectedText","setSelectedText","Form","useForm","form","screen","setProperties","copyAnPaste","canc","setFieldsValue","round","keepRatio","scaleX","scaleY","textValue","replace","activeElement","tagName","removeComponent","sd","setSlideData","setSelectSlide","setSelectComponent","setTextProperties","prop","val","componentIdx","formatSelected","str","flip","direction","changedFields","onValuesChange","allFields","_dispatch","isNaN","ratio","subType","orientation","marginTop","Item","labelCol","wrapperCol","label","BoldOutlined","ItalicOutlined","UnderlineOutlined","FontColorsOutlined","ClearOutlined","AlignLeftOutlined","AlignCenterOutlined","AlignRightOutlined","TextArea","rows","onBlur","selectionStart","getSelection","min","Group","compact","LockOutlined","UnlockOutlined","EyeOutlined","maxIndex","step","RotateRightOutlined","margin","danger","PropertiesContainer","autoplay","setAutoplay","template","setTemplate","setName","useDebouncedCallback","set_name","debouncedName","setDescription","set_description","debouncedDescription","viewer","marginLeft","BodyContainer","MoveableComponent","setTarget","setSlide","setComponentIdx","position","setPosition","setSize","setScale","setRotate","setComponentParameters","children","draggable","rotatable","resizable","scalable","origin","onDrag","beforeDelta","onDragEnd","offsetWidth","offsetHeight","onResize","dist","onResizeEnd","onScale","delta","onScaleEnd","onRotate","onRotateEnd","snappable","bounds","documentElement","clientWidth","bottom","clientHeight","right","verticalGuidelines","horizontalGuidelines","snapCenter","StoryletCreator","setIsSettingVisible","JSON","parse","action","reducers","combineReducers","store","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__"],"mappings":"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","file":"static/js/main.0b9a628b.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport '../style/info.css';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {faInfoCircle} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default function Info({hideSettings})\r\n{\r\n    return (\r\n        <div className=\"info\">\r\n            <FontAwesomeIcon onClick={hideSettings} icon={faInfoCircle} className=\"icon\" />\r\n        </div>\r\n    )\r\n};","export function translate (text, ul) {\r\n    if(ln[text+\"_\"+ul])\r\n        return ln[text+\"_\"+ul];\r\n    else if (ln[text+\"_en\"])\r\n        return ln[text+\"_en\"];\r\n    else\r\n        return text+\"_\"+ul;\r\n}\r\n\r\nlet ln = [];\r\n\r\n/******** IT ********/\r\n\r\n// MENU\r\nln[\"newText_it\"] = \"Nuovo testo\";\r\nln[\"newSpeech_it\"] = \"Bla bla bla...\";\r\nln[\"keyword_it\"] = \"Parola chiave\";\r\n\r\n// tooltip\r\nln[\"addText_it\"] = \"Aggiungi testo\";\r\nln[\"addBalloon_it\"] = \"Aggiungi discorso\";\r\nln[\"addBackground_it\"] = \"Aggiungi sfondo\";\r\nln[\"addImage_it\"] = \"Aggiungi immagine\";\r\nln[\"addDatalet_en\"] = \"Aggiungi datalet\";\r\nln[\"undo_it\"] = \"Annulla (Ctrl+Z)\";\r\nln[\"redo_it\"] = \"Ripeti (Ctrl+Y)\";\r\nln[\"playStoryPreview_it\"] = \"Riproduci anteprima storia\";\r\nln[\"fantasyHelper_it\"] = \"Aiuta la tua fantasia!\";\r\n\r\nln[\"moveUpSlide_it\"] = \"Sposta su scena\";\r\nln[\"moveDownSlide_it\"] = \"Sposta gi scena\";\r\nln[\"removeSlide_it\"] = \"Rimuovi scena\";\r\nln[\"duplicateSlide_it\"] = \"Duplica scena\";\r\nln[\"addSlide_it\"] = \"Aggiungi scena\";\r\n\r\n// SIDE MENU\r\nln[\"save_it\"] = \"Salva\";\r\nln[\"autosave_it\"] = \"Autosave\";\r\nln[\"language_it\"] = \"Lingua\";\r\nln[\"exit_it\"] = \"Esci\";\r\n\r\nln[\"saveBeforeExit_it\"] = \"Salva prima di uscire?\";\r\nln[\"yes_it\"] = \"Si\";\r\nln[\"no_it\"] = \"No\";\r\nln[\"saved_it\"] = \"Salvataggio riuscito!\";\r\nln[\"hasBeenSuccessfullySaved_it\"] = \"La storia  stata salvata con successo!\";\r\nln[\"error_it\"] = \"Qualcosa  andato storto :(\";\r\n\r\n// WORD IDEAS\r\nln[\"analogies_it\"] = \"Analogie\";\r\nln[\"synonyms_it\"] = \"Sinonimi\";\r\nln[\"rhymes_it\"] = \"Rime\";\r\nln[\"path_it\"] = \"PERCORSO\";\r\nln[\"fullLemma_it\"] = \"Lista sinonimi\";\r\nln[\"word_it\"] = \"Parola\";\r\nln[\"score_it\"] = \"Punteggio\";\r\nln[\"frequency_it\"] = \"Frequenza\";\r\nln[\"syllables_it\"] = \"Sillabe\";\r\n\r\n// PROPERTIES\r\nln[\"component_it\"] = \"Componente\";\r\nln[\"slide_it\"] = \"Scena\";\r\n\r\nln[\"title_it\"] = \"Titolo\";\r\nln[\"description_it\"] = \"Descrizione\";\r\n\r\nln[\"template_it\"] = \"Template\";\r\nln[\"linear_it\"] = \"lineare\";\r\nln[\"snail_it\"] = \"chiocciola\";\r\nln[\"cube_it\"] = \"cubo\";\r\nln[\"autoplay_it\"] = \"Autoplay\";\r\n\r\nln[\"text_it\"] = \"Testo\";\r\nln[\"size_it\"] = \"Dim.\";\r\nln[\"position_it\"] = \"Posizione\";\r\nln[\"scale_it\"] = \"Scala\";\r\nln[\"rotate_it\"] = \"Ruota\";\r\nln[\"balloon_it\"] = \"Discorso\";\r\nln[\"balloonType_it\"] = \"Tipo\";\r\nln[\"balloonPlacement_it\"] = \"Pos.\";\r\nln[\"BL_it\"] = \"BL\";\r\nln[\"BR_it\"] = \"BR\";\r\nln[\"TL_it\"] = \"TL\";\r\nln[\"TR_it\"] = \"TR\";\r\nln[\"noneOpt_it\"] = \"No\";\r\nln[\"speechOpt_it\"] = \"Discorso\";\r\nln[\"thoughtOpt_it\"] = \"Pensiero\";\r\nln[\"width_it\"] = \"W\";\r\nln[\"height_it\"] = \"H\";\r\nln[\"top_it\"] = \"X\";\r\nln[\"left_it\"] = \"Y\";\r\nln[\"zIndex_it\"] = \"Z\";\r\nln[\"scaleX_it\"] = \"X\";\r\nln[\"scaleY_it\"] = \"Y\";\r\nln[\"degrees_it\"] = \"Deg.\";\r\n\r\n//buttons\r\nln[\"delete_it\"] = \"Elimina\";\r\n\r\n// tooltip\r\nln[\"keepRatio_it\"] = \"Mantenere proporzion\";\r\nln[\"bringsUp_it\"] = \"Porta in primo piano\";\r\nln[\"flipH_it\"] = \"Capovolgi orizzontalmente\";\r\nln[\"flipV_it\"] = \"Flip verticalmente\";\r\n\r\n// SELECT IMAGES\r\nln[\"selectBackground_it\"] = \"Seleziona sfondo\";\r\nln[\"selectImage_it\"] = \"Seleziona immagine\";\r\nln[\"uploadImage_it\"] = \"Carica immagine\";\r\nln[\"selectColor_it\"] = \"Seleziona colore\";\r\nln[\"buttonOk_it\"] = \"Ok\";\r\nln[\"buttonCancel_it\"] = \"Chiudi\";\r\nln[\"optionUploads_it\"] = \"Consigliate\";\r\n\r\n// image categories\r\nln[\"optionBG1_it\"] = \"Sfondi 1\";\r\nln[\"optionBG2_it\"] = \"Sfondi 2\";\r\nln[\"fantasticCharacters_it\"] = \"Personaggi fantastici\";\r\nln[\"seaLife_it\"] = \"Mondo marino\";\r\n\r\n/******** EN ********/\r\n\r\n// MENU\r\nln[\"newText_en\"] = \"Nex Text\";\r\nln[\"newSpeech_en\"] = \"Blah, blah blah...\";\r\nln[\"keyword_en\"] = \"Keyword\";\r\n\r\n// tooltip\r\nln[\"addText_en\"] = \"Add Text\";\r\nln[\"addBalloon_en\"] = \"Add Speech\";\r\nln[\"addBackground_en\"] = \"Add Background\";\r\nln[\"addImage_en\"] = \"Add Image\";\r\nln[\"addDatalet_en\"] = \"Add Datalet\";\r\nln[\"undo_en\"] = \"Undo (Ctrl+Z)\";\r\nln[\"redo_en\"] = \"Redo (Ctrl+Y)\";\r\nln[\"playStoryPreview_en\"] = \"Play Story Preview\";\r\nln[\"fantasyHelper_en\"] = \"Help your Imagination!\";\r\n\r\nln[\"moveUpSlide_en\"] = \"Move Up Slide\";\r\nln[\"moveDownSlide_en\"] = \"Move Down Slide\";\r\nln[\"removeSlide_en\"] = \"Remove Slide\";\r\nln[\"duplicateSlide_en\"] = \"Duplicate Slide\";\r\nln[\"addSlide_en\"] = \"Add Slide\";\r\n\r\n// SIDE MENU\r\nln[\"save_en\"] = \"Save\";\r\nln[\"autosave_en\"] = \"Autosave\";\r\nln[\"language_en\"] = \"Language\";\r\nln[\"exit_en\"] = \"Exit\";\r\n\r\nln[\"saveBeforeExit_en\"] = \"Save before exit?\";\r\nln[\"yes_en\"] = \"Yes\";\r\nln[\"no_en\"] = \"No\";\r\nln[\"saved_en\"] = \"Saving successful!\";\r\nln[\"hasBeenSuccessfullySaved_en\"] = \"The Story has been successfully saved!\";\r\nln[\"error_en\"] = \"Something went wrong :(\";\r\n\r\n// WORD IDEAS\r\nln[\"analogies_en\"] = \"Analogies\";\r\nln[\"synonyms_en\"] = \"Synonyms\";\r\nln[\"rhymes_en\"] = \"Rhymes\";\r\nln[\"path_en\"] = \"PATH\";\r\nln[\"fullLemma_en\"] = \"Word\";\r\nln[\"word_en\"] = \"Word\";\r\nln[\"score_en\"] = \"Score\";\r\nln[\"frequency_en\"] = \"Frequency\";\r\nln[\"syllables_en\"] = \"Syllables\";\r\n\r\n// PROPERTIES\r\nln[\"component_en\"] = \"Component\";\r\nln[\"slide_en\"] = \"Slide\";\r\n\r\nln[\"title_en\"] = \"Title\";\r\nln[\"description_en\"] = \"Description\";\r\n\r\nln[\"template_en\"] = \"Template\";\r\nln[\"linear_en\"] = \"linear\";\r\nln[\"snail_en\"] = \"snail\";\r\nln[\"cube_en\"] = \"cube\";\r\nln[\"autoplay_en\"] = \"Autoplay\";\r\n\r\nln[\"text_en\"] = \"Text\";\r\nln[\"size_en\"] = \"Size\";\r\nln[\"position_en\"] = \"Position\";\r\nln[\"scale_en\"] = \"Scale\";\r\nln[\"rotate_en\"] = \"Rotate\";\r\nln[\"balloon_en\"] = \"Balloon\";\r\nln[\"balloonType_en\"] = \"Type\";\r\nln[\"balloonPlacement_en\"] = \"Pos.\";\r\nln[\"BL_en\"] = \"BL\";\r\nln[\"BR_en\"] = \"BR\";\r\nln[\"TL_en\"] = \"TL\";\r\nln[\"TR_en\"] = \"TR\";\r\nln[\"noneOpt_en\"] = \"No\";\r\nln[\"speechOpt_en\"] = \"Speech\";\r\nln[\"thoughtOpt_en\"] = \"Thought\";\r\nln[\"width_en\"] = \"W\";\r\nln[\"height_en\"] = \"H\";\r\nln[\"top_en\"] = \"X\";\r\nln[\"left_en\"] = \"Y\";\r\nln[\"zIndex_en\"] = \"Z\";\r\nln[\"scaleX_en\"] = \"X\";\r\nln[\"scaleY_en\"] = \"Y\";\r\nln[\"degrees_en\"] = \"Deg.\";\r\n\r\n//buttons\r\nln[\"delete_en\"] = \"Delete\";\r\n\r\n// tooltip\r\nln[\"keepRatio_en\"] = \"Keep Aspect Ratio\";\r\nln[\"bringsUp_en\"] = \"Brings Up\";\r\nln[\"flipH_en\"] = \"Flip Horizontal\";\r\nln[\"flipV_en\"] = \"Flip Vertical\";\r\n\r\n// SELECT IMAGES\r\nln[\"selectBackground_en\"] = \"Select background\";\r\nln[\"selectImage_en\"] = \"Select image\";\r\nln[\"uploadImage_en\"] = \"Upload image\";\r\nln[\"selectColor_en\"] = \"Select color\";\r\nln[\"buttonOk_en\"] = \"Ok\";\r\nln[\"buttonCancel_en\"] = \"Close\";\r\nln[\"optionUploads_en\"] = \"Recommended \";\r\n\r\n// image categories\r\nln[\"optionBG1_en\"] = \"Backgrounds 1\";\r\nln[\"optionBG2_en\"] = \"Backgrounds 2\";\r\nln[\"fantasticCharacters_en\"] = \"Fantastic Characters\";\r\nln[\"seaLife_en\"] = \"Sea Life\";\r\n\r\n/******** ES ********/\r\n\r\n// SIDE MENU\r\nln[\"save_es\"] = \"Guardar\";\r\nln[\"autosave_es\"] = \"Autosave\";\r\nln[\"language_es\"] = \"Idioma\";\r\n\r\n// WORD IDEAS\r\nln[\"analogies_es\"] = \"Analogie\";\r\nln[\"synonyms_es\"] = \"Sinonimi\";\r\nln[\"rhymes_es\"] = \"Rime\";\r\nln[\"path_es\"] = \"PERCORSO\";\r\nln[\"fullLemma_es\"] = \"Parola\";\r\nln[\"word_es\"] = \"Parola\";\r\nln[\"score_es\"] = \"Punteggio\";\r\nln[\"frequency_es\"] = \"Frequenza\";\r\nln[\"syllables_es\"] = \"Sillabe\";\r\n\r\n/******** FR ********/\r\n\r\n// SIDE MENU\r\nln[\"save_fr\"] = \"Sauver\";\r\nln[\"autosave_fr\"] = \"Autosave\";\r\nln[\"language_fr\"] = \"Langue\";\r\n\r\n// WORD IDEAS\r\nln[\"analogies_fr\"] = \"Analogie\";\r\nln[\"synonyms_fr\"] = \"Sinonimi\";\r\nln[\"rhymes_fr\"] = \"Rime\";\r\nln[\"path_fr\"] = \"PERCORSO\";\r\nln[\"fullLemma_fr\"] = \"Parola\";\r\nln[\"word_fr\"] = \"Parola\";\r\nln[\"score_fr\"] = \"Punteggio\";\r\nln[\"frequency_fr\"] = \"Frequenza\";\r\nln[\"syllables_fr\"] = \"Sillabe\";\r\n\r\n/******** DE ********/\r\n\r\n// SIDE MENU\r\nln[\"save_de\"] = \"Speichern\";\r\nln[\"autosave_de\"] = \"Autosave\";\r\nln[\"language_de\"] = \"Sprache\";\r\n\r\n// WORD IDEAS\r\nln[\"analogies_de\"] = \"Analogie\";\r\nln[\"synonyms_de\"] = \"Sinonimi\";\r\nln[\"rhymes_de\"] = \"Rime\";\r\nln[\"path_de\"] = \"PERCORSO\";\r\nln[\"fullLemma_de\"] = \"Parola\";\r\nln[\"word_de\"] = \"Parola\";\r\nln[\"score_de\"] = \"Punteggio\";\r\nln[\"frequency_de\"] = \"Frequenza\";\r\nln[\"syllables_de\"] = \"Sillabe\";","const selectLanguage = (data) => {\r\n    return {\r\n        type: 'SELECT_LANGUAGE',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default selectLanguage","const setStorylet = (data) => {\r\n    return {\r\n        type: 'SET_STORYLET',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default setStorylet","import React, {useState, useEffect} from 'react'\r\nimport {batch, useDispatch, useSelector} from 'react-redux'\r\nimport axios from \"axios\";\r\nimport {translate} from \"../components/helpers\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faBars } from '@fortawesome/free-solid-svg-icons'\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\n// Style\r\n// import '../vendor/bootstrap.min.css';\r\nimport '../style/menu.css';\r\n\r\n// Actions\r\nimport languageSelected from \"../reducer/actions/select-language\";\r\nimport setStorylet from \"../reducer/actions/set-storylet\";\r\nimport { Select, Switch, notification, Popconfirm } from 'antd';\r\n\r\nexport default function Menu() {\r\n    const dispatch = useDispatch();\r\n\r\n    const [menuStatus, setMenuStatus] = useState('');\r\n    const [autosave, setAutosave] = useState(false);\r\n    const [language, setLanguage] = useState('it');\r\n    const selectedLanguage = useSelector(state => state.selectedLanguage);\r\n    const slidesData = useSelector(state => state.slidesData);\r\n    const storylet = useSelector(state => state.storylet);\r\n\r\n    const openNotificationWithIcon = type => {\r\n        if(type==='success')\r\n            notification[type]({\r\n                message: translate('saved', language),\r\n                description: translate('hasBeenSuccessfullySaved', language)\r\n            });\r\n        else if(type==='error')\r\n            notification[type]({\r\n                message: translate('error', language),\r\n                // description: translate('hasBeenSuccessfullySaved', language)\r\n            });\r\n        };\r\n\r\n    // useEffect(() => {\r\n    //     let url_string = window.location.href;\r\n    //     let url = new URL(url_string);\r\n    //     let ln = url.searchParams.get(\"ln\");\r\n    //\r\n    //     if(!ln)\r\n    //         ln = navigator.language.split('-')[0];\r\n    //\r\n    //     if(['en', 'it', 'es', 'fr', 'de'].indexOf(ln) === -1)\r\n    //         ln = 'en';\r\n    //\r\n    //     dispatch(languageSelected(ln));\r\n    // }, []);\r\n\r\n    useEffect(() => {\r\n        if(storylet) {\r\n            if(storylet.language) {\r\n                setLanguage(storylet.language);\r\n                dispatch(languageSelected(storylet.language));\r\n            } else {\r\n                let url_string = window.location.href;\r\n                let url = new URL(url_string);\r\n                let ln = url.searchParams.get(\"ln\");\r\n\r\n                if(!ln)\r\n                    ln = navigator.language.split('-')[0];\r\n\r\n                if(['en', 'it', 'es', 'fr', 'de'].indexOf(ln) === -1)\r\n                    ln = 'en';\r\n\r\n                dispatch(languageSelected(ln));\r\n            }\r\n\r\n            if(storylet.autosave)\r\n                setAutosave(storylet.autosave);\r\n        }\r\n    }, [storylet, dispatch]);\r\n\r\n    // useEffect(() => {\r\n    //     if(!selectedLanguage)\r\n    //         return;\r\n    // }, [selectedLanguage]);\r\n\r\n    useEffect(() => {\r\n        if(slidesData && storylet)\r\n        if(autosave)\r\n            save_storylet();\r\n    }, [slidesData, storylet]);\r\n\r\n    const toggle_sidebar = () => {\r\n        if(menuStatus === '')\r\n            setMenuStatus('open');\r\n        else\r\n            setMenuStatus('');\r\n    };\r\n\r\n    const save_storylet = (exit=false) => {\r\n        axios.put(window.API_ENDPOINT.SAVE_STORYLET, {\r\n            storyletid: window.STORY.DATA.id,\r\n            story     : slidesData,\r\n            metadata  : storylet\r\n        })\r\n            .then((response) => {\r\n                if(exit === true) //save and exit\r\n                    window.location.href = window.STATIC.EXIT_URL;\r\n                if(!autosave)\r\n                    openNotificationWithIcon('success');\r\n                // console.log(response);\r\n            }, (error) => {\r\n                openNotificationWithIcon('error');\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    const set_autosave = () => {\r\n        let data = cloneDeep(storylet);\r\n        data.autosave = !autosave;\r\n\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n\r\n        setAutosave(!autosave);\r\n\r\n        if(autosave) {\r\n            save_storylet()\r\n        }\r\n    };\r\n\r\n    const set_language = (value) => {\r\n        let data = cloneDeep(storylet);\r\n        data.language = value;\r\n\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n\r\n        dispatch(languageSelected(value));\r\n    };\r\n\r\n    function confirm(e) {\r\n        save_storylet(true);\r\n        // console.log(e);\r\n    }\r\n\r\n    function cancel(e) {\r\n        window.location.href = window.STATIC.EXIT_URL;\r\n        // console.log(e);\r\n    }\r\n\r\n    function export_HTML() {\r\n        alert('Export HTML')\r\n    }\r\n\r\n    return (\r\n        <div className=\"menu\">\r\n            <FontAwesomeIcon icon={faBars} className=\"icon\" onClick={toggle_sidebar} />\r\n            <div className={`sidebar ${menuStatus}`}>\r\n                <div className=\"sidebarBody\">\r\n                    <div className=\"menu-item menu-btn\" onClick={()=>save_storylet()}>{translate('save', selectedLanguage)}</div>\r\n                    <div className=\"menu-item\">\r\n                        {translate('autosave', language)}\r\n                        <Switch checked={autosave} size={'small'} onChange={set_autosave}/>\r\n                    </div>\r\n\r\n                    <div className=\"menu-item\">\r\n                        {translate('language', selectedLanguage)}\r\n                        <Select value={language} onChange={set_language}>\r\n                            <Select.Option value=\"it\">IT</Select.Option>\r\n                            <Select.Option value=\"en\">EN</Select.Option>\r\n                            <Select.Option value=\"es\">ES</Select.Option>\r\n                            <Select.Option value=\"fr\">FR</Select.Option>\r\n                            <Select.Option value=\"de\">DE</Select.Option>\r\n                        </Select>\r\n                    </div>\r\n\r\n                    {/*<div className=\"menu-item\">*/}\r\n                    {/*    <div onClick={()=>export_HTML()} >{translate('exportHTML', language)}</div>*/}\r\n                    {/*</div>*/}\r\n\r\n                    <div className=\"menu-item menu-btn\">\r\n                        <Popconfirm\r\n                            placement=\"right\"\r\n                            title={translate('saveBeforeExit', language)}\r\n                            onConfirm={confirm}\r\n                            onCancel={cancel}\r\n                            okText={translate('yes', language)}\r\n                            cancelText={translate('no', language)}\r\n                        >\r\n                            <div className=\"\">{translate('exit', language)}</div>\r\n                        </Popconfirm>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React from 'react'\r\n\r\nimport Info from '../info'\r\nimport Menu from '../menu'\r\n\r\nimport '../../style/container/header-container.css';\r\n\r\nexport default function HeaderContainer({hideSettings})\r\n{\r\n    return (\r\n        <div className=\"header\">\r\n            <Menu />\r\n            <div className=\"logo\"> </div>\r\n            <Info hideSettings={hideSettings} />\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport '../../style/slide-components/text-style.css';\r\n\r\nexport default function Text({component, onClick, isEditable})\r\n{\r\n    let balloonFontSize = component.fontSize*component.w*0.002;\r\n    const TextComponent = styled.div`\r\n        top:                ${props => props.y+'%'};\r\n        left:               ${props => props.x+'%'};\r\n        width:              ${props => props.w+'%'};\r\n        height:             ${props => props.h+'%'};\r\n        transform:          ${props => 'scale(' + props.scale[0] + ',' + props.scale[1] + ') rotate(' + props.rotate + 'deg)'};\r\n        z-index:            ${props => props.zIndex};\r\n        \r\n        font-family:         ${props => props.fontFamily};\r\n        font-size:           ${props => 0.1*(isEditable ? props.fontSize : props.fontSize/2)+'vw'};\r\n        color:               ${props => props.color};\r\n        font-weight:         ${props => props.fontWeight};\r\n        font-style:          ${props => props.fontStyle};\r\n        text-decoration:     ${props => props.textDecoration};\r\n        text-align:          ${props => props.textAlign};\r\n        background-color:    ${props => props.backgroundColor};\r\n        \r\n        & > div {\r\n            overflow: hidden\r\n        }\r\n        \r\n        &.balloon {\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            padding:            ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            border-radius:      ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            overflow: visible;\r\n            \r\n            white-space: break-spaces;\r\n            font-size:          ${(isEditable ? balloonFontSize : balloonFontSize/2)+'vw'};\r\n            text-align: center\r\n        }\r\n        \r\n        &.balloon:before, &.balloon:after {\r\n            content: ' ';\r\n            position: absolute;\r\n            width: 0;\r\n            height: 0;\r\n        }\r\n        \r\n        &.balloon.speech:before {\r\n            left:               ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            bottom:             ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border:             ${(isEditable ? 1.25 : 0.625)+'vw solid'};\r\n            border-color:       #212121 transparent transparent #212121;\r\n        }\r\n        \r\n        &.balloon.speech:after {\r\n            left:               ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            bottom:             ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border:             ${(isEditable ? 0.75 : 0.375)+'vw solid'};\r\n            border-color:       ${props => (props.backgroundColor ? props.backgroundColor : '#fff') + ' transparent transparent ' + (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n        }\r\n        \r\n        &.balloon.speech.BR:before {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            border-color:       #212121 #212121 transparent transparent;\r\n        }\r\n        \r\n        &.balloon.speech.BR:after {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            border-color:       ${props => (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff') + ' transparent transparent'};\r\n        }\r\n        \r\n        &.balloon.speech.TL:before {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border-color:       transparent transparent #212121 #212121;\r\n        }\r\n        \r\n        &.balloon.speech.TL:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border-color:       ${props =>  ' transparent transparent ' + (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff')};\r\n        }\r\n        \r\n        &.balloon.speech.TR:before {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border-color:       transparent #212121 #212121 transparent;\r\n        }\r\n        \r\n        &.balloon.speech.TR:after {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border-color:       ${props => 'transparent ' + (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff') + ' transparent'};\r\n        }\r\n        \r\n        &.balloon.thought {\r\n            border-radius:      ${(isEditable ? 10 : 5)+'vw'};\r\n            padding:            ${(isEditable ? 1 : 0.5)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought:before, .balloon.thought:after {\r\n            left:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            bottom:             ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n            width:              ${(isEditable ? 3 : 1.5)+'vw'};\r\n            height:             ${(isEditable ? 3 : 1.5)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            border-radius: 50%;\r\n        }\r\n        \r\n        &.balloon.thought:after {\r\n            left:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n            bottom:             ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n            width:              ${(isEditable ? 2 : 1)+'vw'};\r\n            height:             ${(isEditable ? 2 : 1)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            border-radius: 50%;\r\n        }\r\n        \r\n        &.balloon.thought.BR:before, .balloon.thought:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.BR:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TL:before, .balloon.thought:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TL:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TR:before, .balloon.thought:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TR:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n        }\r\n    `;\r\n\r\n    return (\r\n        <TextComponent {...component} className={\"text-moveable-container \"+(component.balloon ? component.balloon : \"\")+\" \"+(component.placement ? component.placement : \"\")} onClick={onClick} id={isEditable ? \"component-\"+component.index : \"\"}>\r\n            <div className={\"inner_text\"} dangerouslySetInnerHTML={{__html: component.value}} />\r\n            {/*{component.value}*/}\r\n        </TextComponent>\r\n    )\r\n};","import React from 'react';\r\n\r\nimport '../../style/slide-components/image-style.css';\r\n\r\nexport default function Image({component, onClick, isEditable})\r\n{\r\n    return (\r\n        <div className=\"image-moveable-container\" onClick={onClick} id={isEditable ? \"component-\"+component.index : \"\"}\r\n            style={{\r\n                top:component.y+'%',\r\n                left:component.x+'%',\r\n                width:component.w+'%',\r\n                height:component.h+'%',\r\n                transform:'scale(' + component.scale[0] + ',' + component.scale[1] + ') rotate(' + component.rotate + 'deg)',\r\n                zIndex:component.zIndex\r\n            }}\r\n        >\r\n            <img src={component.src} alt={component.src}/>\r\n        </div>\r\n    )\r\n};","import styled from 'styled-components'\r\n\r\nconst SlideStyle = styled.div`\r\n  width: ${(props) => props.isSettingVisible ? '80%' : '50%'};\r\n  padding-top: ${(props) => props.isSettingVisible ? '80%' : '50%'};\r\n  margin: 40px auto;\r\n  position: relative;\r\n  background: url(${(props) => props.background});\r\n  background-size: cover;\r\n  background-color: ${(props) => props.backgroundColor || 'var(--storylet-white)'};\r\n  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\r\n  cursor: ${(props) => props.cursor}; \r\n  \r\n  cursor: ${(props) => props.isEditable ? 'auto' : 'pointer'};\r\n  border: ${(props) => props.isEditable ? 'none' : (props.selected ? '2px solid var(--storylet-driver)' : '2px solid transparent')};\r\n  background-origin: border-box;\r\n  \r\n  .pageCount {\r\n    color: var(--storylet-white);\r\n    position: absolute;\r\n    \r\n    //right: 0;\r\n    //bottom: -28px;\r\n    \r\n    //bottom: 4px;\r\n    //right: 4px;\r\n    \r\n    top: -10px;\r\n    right: -10px;\r\n    \r\n    font-weight: 700;\r\n    font-size: 12px;\r\n    background: red;\r\n    border-radius: 50%;\r\n    height: 20px;\r\n    width: 20px;\r\n    background:  var(--storylet-driver);\r\n    text-align: center;\r\n    line-height: 20px;\r\n  }\r\n`;\r\n\r\nexport default SlideStyle","const selectComponent = (data) => {\r\n    return {\r\n        type: 'SELECT_COMPONENT',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default selectComponent","import React from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\n\r\n// Components\r\nimport Text from './slide-components/text'\r\nimport Image from './slide-components/image'\r\n\r\n// Style\r\nimport SlideStyle from '../style/slide'\r\n\r\n// Actions\r\nimport componentSelected from '../reducer/actions/select-component'\r\n\r\n// const shouldSlideNotRender = (prevProps, nextProps) => {\r\n//     return false; //always rerender\r\n// };\r\n\r\nfunction Slide({parameters, isEditable, onClick, isSettingVisible, selected})\r\n{\r\n    const dispatch = useDispatch();\r\n\r\n    // const selectedComponent = useSelector(state => state.selectedComponent);\r\n\r\n    return (\r\n        <SlideStyle selected={selected} id={\"slide_\"+parameters.id} isSettingVisible={isSettingVisible} background={parameters.background} backgroundColor={parameters.backgroundColor} isEditable={isEditable} onClick={onClick}>\r\n            {(() => {\r\n                if (!parameters.components) return null;\r\n                return parameters.components.map((c, idx) => {\r\n                    switch (c.type) {\r\n                        case 'text'  :\r\n                            return (\r\n                                <Text key={idx} isEditable={isEditable} component={c}\r\n                                      // onClick={(isEditable && (!selectedComponent || selectedComponent.index !== c.index)) ? () => {dispatch(componentSelected(c))} : null}\r\n                                      onClick={isEditable ? () => {dispatch(componentSelected(c))} : null}\r\n                                />\r\n                            );\r\n                        case 'image' :\r\n                            return (\r\n                                <Image key={idx} isEditable={isEditable} component={c}\r\n                                       // onClick={(isEditable && (!selectedComponent || selectedComponent.index !== c.index)) ? () => {dispatch(componentSelected(c))} : null}\r\n                                       onClick={isEditable ? () => {dispatch(componentSelected(c))} : null}\r\n                                />\r\n                            );\r\n                        // default : break;\r\n                    }\r\n                    // return null;\r\n                })\r\n            }\r\n            )()}\r\n            {console.log('render slide')}\r\n            {isEditable ? \"\" : (<div className={\"pageCount\"}>{parameters.index+1}</div>)}\r\n        </SlideStyle>\r\n    )\r\n}\r\n\r\n// export default React.memo(Slide, shouldSlideNotRender)\r\nexport default Slide\r\n\r\n","const selectSlide = (data) => {\r\n    return {\r\n        type: 'SELECT_SLIDE',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default selectSlide","import React from 'react'\r\nimport {batch, useDispatch, useSelector} from 'react-redux'\r\n\r\n// Components\r\nimport Slide from '../slide'\r\n\r\n// Style\r\nimport '../../style/container/slide-container.css';\r\n\r\n// Actions\r\nimport selectSlide from '../../reducer/actions/select-slide'\r\nimport componentSelected from \"../../reducer/actions/select-component\";\r\n\r\nexport default function SlideContainer()\r\n{\r\n    const dispatch = useDispatch();\r\n    const slidesData = useSelector(state => state.slidesData);\r\n    const selectedSlide = useSelector(state => state.selectedSlide);\r\n\r\n    return (\r\n        <div className=\"slide-container\">\r\n            {slidesData.map((slide, idx) =>\r\n                <Slide selected={slide.id===selectedSlide.id} isSettingVisible={true} key={idx} parameters={slide} isEditable={false} onClick={() => { batch(() => {dispatch(componentSelected(null)); dispatch(selectSlide(slidesData[idx]))});}} />\r\n            )}\r\n        </div>\r\n    )\r\n};","import React, {useState, useEffect} from 'react';\r\nimport 'd3-transition';\r\nimport { select } from 'd3-selection';\r\nimport ReactWordcloud from 'react-wordcloud';\r\nimport axios from \"axios\"; // https://react-wordcloud.netlify.com/usage/options\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport '../../style/container/wordcloud-container.css'\r\nimport {useSelector} from \"react-redux\";\r\nimport {translate} from \"../helpers\";\r\n\r\nexport default function WordcloudContainer({startingWord}) {\r\n\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const colors = {noun:'#4CAF50',adjective:'#F44336',verb:'#FF9800',adverb:'#2196F3'};\r\n    const [words, setWords] = useState([]);\r\n    const [selectedWords, setSelectedWords] = useState(null);\r\n    const [clickedWord, setClickedWord] = useState(null);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!startingWord || startingWord.length === 0)\r\n            return;\r\n        setSelectedWords(startingWord.slice());\r\n        wordAssociations(startingWord[0]);\r\n    }, [startingWord]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if (!selectedWords || selectedWords.length === 0)\r\n            return;\r\n\r\n        // console.log(selectedWords);\r\n\r\n        let span = [];\r\n        for (let i = 0; i < selectedWords.length; i++) {\r\n            span.push( <span onClick={()=>{goToWordAssociations(i)}} key={i} >{selectedWords[i]}</span> );\r\n            span.push( ' / ' );\r\n        }\r\n\r\n        ReactDOM.render(span, document.getElementById('selected-words'));\r\n    }, [selectedWords]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if (!selectedWords || selectedWords.length === 0)\r\n            return;\r\n        // console.log(\"clickedWord\");\r\n\r\n        // selectedWords.push(word.text);\r\n        let temp = selectedWords.slice();\r\n        temp.push(clickedWord);\r\n        setSelectedWords(temp);\r\n\r\n    }, [clickedWord]);\r\n\r\n    function goToWordAssociations(i) {\r\n        //todo?\r\n        let searchKey = selectedWords[i];\r\n        let temp = selectedWords.slice();\r\n        temp.splice(i+1);\r\n        let temp2 = temp.slice();\r\n        setSelectedWords(temp2);\r\n\r\n        wordAssociations(searchKey);\r\n    }\r\n\r\n    function wordAssociations(searchKey) {\r\n        // text: 'cane',\r\n        // lang: 'it', // en fr de pt ru es\r\n        // type: 'response', // stimulus\r\n        // limit: '50', // max 300\r\n        // pos: 'noun,adjective,verb,adverb',\r\n        // indent: 'yes' // no\r\n        axios.get('https://api.wordassociations.net/associations/v1.0/json/search?apikey=ebb2ab66-af3f-42c9-bc24-8072f0c413d5&text=' + searchKey + '&lang=' + ln + '&limit=50')\r\n            .then((response) => {\r\n                let items = response.data.response[0].items;\r\n                    let words = [];\r\n                    for(let i=0; i<items.length; i++) {\r\n                        words.push({\r\n                            text: items[i].item,\r\n                            value: items[i].weight,\r\n                            color: colors[items[i].pos]\r\n                        });\r\n                    }\r\n                    setWords(words);\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    const options = {\r\n        fontSizes: [20, 100],\r\n        rotations: 3,\r\n        rotationAngles: [0, 90],\r\n        fontFamily: '\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif',\r\n        padding: 10,\r\n        transitionDuration: 1000\r\n    };\r\n\r\n    const callbacks = {\r\n        getWordColor: word => (word.color),\r\n        getWordTooltip: word =>\r\n            `La parola \"${word.text}\" ha una rilevanza pari a ${word.value}.`,//todo translate\r\n        onWordClick: getCallback('onWordClick'),\r\n        onWordMouseOut: getCallback('onWordMouseOut'),\r\n        onWordMouseOver: getCallback('onWordMouseOver')\r\n    };\r\n\r\n    function getCallback(callback) {\r\n        return function(word, event) {\r\n            const isActive = callback !== 'onWordMouseOut';\r\n            const element = event.target;\r\n            const text = select(element);\r\n            text.on('click', () => {\r\n                // //todo?\r\n                // selectedWords.push(word.text);\r\n                // let temp = selectedWords.slice();\r\n                // // temp.push(word.text);\r\n                // setSelectedWords(temp);\r\n                setClickedWord(word.text);\r\n\r\n                wordAssociations(word.text);\r\n            })\r\n            // .transition()\r\n            // .attr('background', 'white')\r\n            .attr('text-decoration', isActive ? 'underline' : 'none');\r\n    };\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div id=\"path\">\r\n                {translate('path', ln)}:&nbsp;<div id=\"selected-words\"> </div>\r\n            </div>\r\n            <div id=\"wordcloud\">\r\n                <ReactWordcloud callbacks={callbacks} options={options} words={words} />\r\n            </div>\r\n        </>\r\n    )\r\n};","import React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport {Table} from 'antd';\r\nimport '../../style/container/rhymebrain-container.css'\r\nimport {useSelector} from \"react-redux\";\r\nimport {translate} from \"../helpers\";\r\n\r\nexport default function RhymebrainContainer({startingWord}) {\r\n\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const [dataSource, setDataSource] = useState([]);\r\n\r\n    const columns = [\r\n        {\r\n            title: translate('word', ln),\r\n            dataIndex: 'word',\r\n            key: 'word',\r\n            sorter: (a, b) => a.word.localeCompare(b.word),\r\n        },\r\n        {\r\n            title: translate('score', ln),\r\n            dataIndex: 'score',\r\n            key: 'score',\r\n            sorter: (a, b) => a.score - b.score,\r\n        },\r\n        // {\r\n        //     title: translate('frequency', ln),\r\n        //     dataIndex: 'freq',\r\n        //     key: 'freq',\r\n        //     sorter: (a, b) => a.freq - b.freq,\r\n        // },\r\n        {\r\n            title: translate('syllables', ln),\r\n            dataIndex: 'syllables',\r\n            key: 'syllables',\r\n            sorter: (a, b) => a.syllables - b.syllables,\r\n        }\r\n    ];\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!startingWord || startingWord.length === 0)\r\n            return;\r\n        // console.log(\"RhymebrainContainer\");\r\n\r\n        axios.get('https://rhymebrain.com/talk?function=getRhymes&word=' + startingWord + '&lang=' + ln)\r\n            .then((response) => {\r\n                setDataSource(response.data);\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n\r\n    }, [startingWord]);\r\n\r\n    return (\r\n        <div className=\"rhymebrain-container\">\r\n            <Table dataSource={dataSource} columns={columns} rowKey=\"word\" size=\"middle\" />\r\n        </div>\r\n    )\r\n};","import React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport ReactWordcloud from \"react-wordcloud\";\r\n// import 'antd/dist/antd.css';\r\nimport {Table} from 'antd';\r\nimport '../../style/container/babelnet-container.css'\r\nimport {useSelector} from \"react-redux\";\r\nimport {translate} from \"../helpers\";\r\n\r\n// TODO merge & delete lemmas\r\n\r\nexport default function BabelnetContainer({startingWord}) {\r\n\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const source = null;\r\n\r\n    // const [synsetIds, setSynsetIds] = useState(null);\r\n    const key = '91373219-3631-4c81-8c7b-5f8ae29776ee';\r\n    const lang = ln;\r\n\r\n    const [dataSource, setDataSource] = useState([]);\r\n\r\n    const columns = [\r\n        {\r\n            title: translate('fullLemma', ln),\r\n            dataIndex: 'properties.fullLemma',\r\n            key: 'fullLemma',\r\n            // render: (text, record, index) => {\r\n            //     return (\r\n            //         record.properties.fullLemma + ' (' + record.properties.source + ')'\r\n            //     )\r\n            // },\r\n            sorter: (a, b) => a.properties.fullLemma.localeCompare(b.properties.fullLemma),\r\n        },\r\n        // {\r\n        //     title: 'Source',\r\n        //     dataIndex: 'properties.source',\r\n        //     key: 'source',\r\n        //     sorter: (a, b) => a.properties.source.localeCompare(b.properties.source),\r\n        // },\r\n        // {\r\n        //     title: 'Synset ID',\r\n        //     dataIndex: 'properties.synsetID.id',\r\n        //     key: 'source',\r\n        //     sorter: (a, b) => a.properties.synsetID.id.localeCompare(b.properties.synsetID.id),\r\n        // }\r\n    ];\r\n\r\n    useEffect(() => {\r\n        if(!startingWord || startingWord.length === 0)\r\n            return;\r\n        // console.log(\"BabelnetContainer\"); // https://babelnet.org/guide\r\n\r\n        getSenses(startingWord, lang, lang, null, source);\r\n        // getSynset(\"bn:00015983n\", lang);\r\n\r\n    }, [startingWord]);\r\n\r\n    // useEffect(() => {\r\n    //     if(!synsetIds)\r\n    //         return;\r\n    //     console.log(synsetIds);\r\n    // }, [synsetIds]);\r\n\r\n    function getSynsetIds(lemma, searchLang, targetLang, pos, source) {\r\n        axios.get('https://babelnet.io/v5/getSynsetIds?lemma=' + lemma + '&searchLang=' + searchLang + '&targetLang=' + targetLang + '&key=' + key)\r\n            .then((response) => {\r\n                //todo\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    function getSynset(id, targetLang) {\r\n        axios.get('https://babelnet.io/v5/getSynset?id=' + id + '&targetLang=' + targetLang + '&key=' + key)\r\n            .then((response) => {\r\n                let items = response.data.senses;\r\n                let words = [];\r\n                for(let i=0; i<items.length; i++) {\r\n                    words.push({\r\n                        text: items[i].properties.fullLemma,\r\n                        value: items[i].properties.frequency+1,\r\n                        color: \"#000000\"\r\n                    });\r\n                }\r\n                setWords(words);\r\n                let glosses = '';//todo GLOSS: translate\r\n                if(response.data.glosses) {\r\n                    for(let i=0; i<response.data.glosses.length; i++)\r\n                        glosses += ' ' + response.data.glosses[i].gloss\r\n                    setGloss(glosses);\r\n                }\r\n                //todo\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    function getSenses(lemma, searchLang, targetLang, pos, source) {\r\n        axios.get('https://babelnet.io/v5/getSenses?lemma=' + lemma + '&searchLang=' + searchLang + '&targetLang=' + targetLang + (pos ? '&source=' + pos : '') + (source ? '&source=' + source : '') + '&key=' + key)\r\n            .then((response) => {\r\n                // console.log(response)\r\n                let synsetIds = [];\r\n                let _dataSource = [];\r\n                for(let i=0; i< response.data.length; i++) {\r\n                    if(synsetIds.indexOf(response.data[i].properties.synsetID.id) > -1)\r\n                        continue;\r\n                    synsetIds.push(response.data[i].properties.synsetID.id);\r\n                    _dataSource.push(response.data[i]);\r\n                }\r\n                setDataSource(_dataSource);\r\n                //todo\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    function getOutgoingEdges(id) {\r\n        axios.get('https://babelnet.io/v5/getOutgoingEdges?id=' + id + '&key=' + key)\r\n            .then((response) => {\r\n                //todo\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    // TABLE\r\n\r\n    const onRow = (record, rowIndex) => {\r\n        return {\r\n            onClick: event => {\r\n                getSynset(event.currentTarget.dataset.rowKey, lang);\r\n            }, // click row\r\n            onDoubleClick: event => {}, // double click row\r\n            onContextMenu: event => {}, // right button click row\r\n            onMouseEnter: event => {}, // mouse enter row\r\n            onMouseLeave: event => {}, // mouse leave row\r\n        };\r\n    };\r\n\r\n    // WORDCLOUD\r\n\r\n    const [words, setWords] = useState([]);\r\n    const [gloss, setGloss] = useState([]);\r\n\r\n    const options = {\r\n        fontSizes: [20, 100],\r\n        rotations: 3,\r\n        rotationAngles: [0, 90],\r\n        fontFamily: '\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif',\r\n        padding: 10,\r\n        transitionDuration: 1000\r\n    };\r\n\r\n    const callbacks = {\r\n\r\n    };\r\n\r\n    return (\r\n        <div className=\"babelnet-container\">\r\n            <div className=\"babelnet-table\">\r\n                <Table dataSource={dataSource} columns={columns} rowKey={record => record.properties.synsetID.id} size=\"middle\" onRow={onRow} />\r\n            </div>\r\n            <div className=\"babelnet-wordcloud\">\r\n                <div id=\"babelnet-gloss\">\r\n                    <div id=\"gloss\">{gloss}</div>\r\n                </div>\r\n                <div id=\"babelnet-words\">\r\n                    <ReactWordcloud callbacks={callbacks} options={options} words={words} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React, {useState, useEffect, useRef} from 'react';\r\n\r\nimport WordcloudContainer from './wordcloud-container'\r\nimport RhymebrainContainer from './rhymebrain-container'\r\nimport BabelnetContainer from './babelnet-container'\r\n\r\nimport '../../style/container/word-container.css'\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faTimes} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {faLightbulb} from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nimport {translate} from \"../helpers\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nexport default function WordContainer({startingWord})\r\n{\r\n    const selectedLanguage = useSelector(state => state.selectedLanguage);\r\n\r\n    const coverContainer = useRef(false);\r\n    const [selectedTab, setSelectedTab] = useState(0);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!startingWord || startingWord.length === 0)\r\n            return;\r\n        setSelectedTab(0);\r\n        coverContainer.current.style.visibility = 'visible';\r\n    }, [startingWord]);\r\n\r\n    function hideWordcloud() {\r\n        coverContainer.current.style.visibility = 'hidden';\r\n    }\r\n\r\n    function selectTab(e) {\r\n        setSelectedTab(e._targetInst.index-1);\r\n    }\r\n\r\n    return (\r\n        <div id=\"cover-container\" ref={coverContainer}>\r\n            <div id=\"wordcloud-container\">\r\n                <FontAwesomeIcon id=\"wordcloud-close\" icon={faTimes} className=\"icon\" onClick={hideWordcloud} />\r\n                <div className=\"word-tabs\">\r\n                    <div className=\"word-tab\"><FontAwesomeIcon icon={faLightbulb} className=\"icon\" /> {startingWord}</div>\r\n                    <div className={selectedTab === 0 ? \"word-tab selected\" : \"word-tab\"} onClick={selectTab}>{translate('analogies', selectedLanguage)}</div>\r\n                    <div className={selectedTab === 1 ? \"word-tab selected\" : \"word-tab\"} onClick={selectTab}>{translate('synonyms', selectedLanguage)}</div>\r\n                    <div className={selectedTab === 2 ? \"word-tab selected\" : \"word-tab\"} onClick={selectTab}>{translate('rhymes', selectedLanguage)}</div>\r\n                </div>\r\n                <div className=\"word-body\">\r\n                    <div className={selectedTab === 0 ? \"tab-content selected\" : \"tab-content\"}>\r\n                        <WordcloudContainer startingWord={startingWord} />\r\n                    </div>\r\n                    <div className={selectedTab === 1 ? \"tab-content selected\" : \"tab-content\"}>\r\n                        <BabelnetContainer startingWord={startingWord} />\r\n                    </div>\r\n                    <div className={selectedTab === 2 ? \"tab-content selected\" : \"tab-content\"}>\r\n                        <RhymebrainContainer startingWord={startingWord} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React, {useState, useEffect, useRef} from 'react';\r\nimport { Upload, Modal } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport {translate} from \"../helpers\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nexport function AntUpload ({name,\r\n                            //value = ['https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png','https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png','https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'],\r\n                            value,\r\n                            onChange,\r\n                            max=1})\r\n{\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const [_fileList, setFileList]             = useState([]);\r\n    const [_previewVisible, setPreviewVisible] = useState(false);\r\n    const [_previewImage, setPreviewImage]     = useState(null);\r\n\r\n    const runnedOnce = useRef(false);\r\n\r\n    /*const normFile = e => {\r\n        console.log('Upload event:', e);\r\n        if (Array.isArray(e)) {\r\n            return e;\r\n        }\r\n        return e && e.fileList;\r\n    };*/\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!value || runnedOnce.current)\r\n            return;\r\n\r\n        runnedOnce.current = true;\r\n\r\n        // Se la prima volta che entri qui value  un file\r\n        // vuo dire che nn erano associati file all'oggetto e lo stai aggiungendo adesso\r\n        if(value.isFile/*Array.isArray(value) && value[0] && value[0].originFileObj*/)\r\n            return;\r\n\r\n        let fl = [];\r\n\r\n        if(Array.isArray(value))\r\n            value.forEach((f, idx) => fl.push({uid:idx, url:`${window.global.base_path}${f}`}));\r\n        else\r\n            fl.push({uid:1, url:`${window.global.base_path}${value}`});\r\n\r\n        setFileList(fl);\r\n\r\n    }, [value]);\r\n\r\n    const dummy_request = function({file, onSuccess})\r\n    {\r\n        setTimeout(()=>{\r\n            onSuccess(\"ok\")\r\n        },0);\r\n    };\r\n\r\n    const handle_onChange = function ({file, fileList})\r\n    {\r\n        setFileList(fileList);\r\n        if(onChange)\r\n            onChange(fileList.length > 0 ? {isFile:true, fileList: fileList} : '');\r\n    };\r\n\r\n    /*const handle_upload = function (file, fileList) {\r\n        setFile(fileList)\r\n    };*/\r\n\r\n    const handleCancel = function () {\r\n        setPreviewVisible(false);\r\n    };\r\n\r\n    const handlePreview = async file => {\r\n        if (!file.url && !file.preview) {\r\n            file.preview = await getBase64(file.originFileObj);\r\n        }\r\n\r\n        setPreviewImage(file.url || file.preview);\r\n        setPreviewVisible(true);\r\n    };\r\n\r\n    const getBase64 = (file) =>\r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    };\r\n\r\n    const uploadButton = (\r\n        <div>\r\n            <PlusOutlined />\r\n            <div className=\"ant-upload-text\">{translate('uploadImage', ln)}</div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className={'ant-upload-container'}>\r\n            <Upload\r\n                 /*fileList={_fileList}*/ /*beforeUpload={handle_upload}*/\r\n                 fileList={_fileList}\r\n                 multiple={true}\r\n                 onChange={handle_onChange}\r\n                 onPreview={handlePreview}\r\n                 customRequest={dummy_request}\r\n                 listType=\"picture-card\"\r\n            >\r\n                {!_fileList || _fileList.length < max ? uploadButton : null}\r\n           </Upload>\r\n            <Modal visible={_previewVisible} footer={null} onCancel={handleCancel}>\r\n                <img alt=\"example\" style={{ width: '100%' }} src={_previewImage} />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (AntUpload);","import React, {useEffect, useState} from 'react';\r\nimport {useSelector} from \"react-redux\";\r\nimport {translate} from \"./helpers\";\r\nimport { Button, Select, Modal, Row, Col, Popover } from 'antd';\r\nimport { CheckOutlined, BgColorsOutlined } from '@ant-design/icons';\r\nimport { SketchPicker } from 'react-color';\r\nimport { AntUpload } from \"./CustomFormInput/AntUpload\";\r\n\r\nimport '../style/image-gallery.css'\r\n\r\nexport default function ImageGallery({isOpened, closeGallery, type}) {\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const bg1 = [\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/forest.png\",\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/sky.png\",\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/anchor-156720_960_720.png\",\r\n            _id:'156720_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/astronaut-background-cartoon-cosmonaut.jpg\",\r\n            _id:'cosmonaut'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/astronaut-cartoon-earth-exploration.jpg\",\r\n            _id:'exploration'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/atmosphere-vehicle-space-circle-outer-space-earth-1405991-pxhere.com.png\",\r\n            _id:'1405991'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/beach-4496830_960_720.png\",\r\n            _id:'4496830_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/cartoon-background-nature.jpg\",\r\n            _id:'nature'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/cartoon-livingroom.png\",\r\n            _id:'livingroom'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/cartoon-nature-lake.jpg\",\r\n            _id:'lake'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/cartoon-nature_2.jpg\",\r\n            _id:'nature_2'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/country-32248_960_720.png\",\r\n            _id:'32248_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/forest.jpg\",\r\n            _id:'forestforest'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/globe-308991_960_720.png\",\r\n            _id:'308991_960_720'\r\n\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/kitchen-294596_960_720.png\",\r\n            _id:'294596_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/mare-molo.jpg\",\r\n            _id:'mare-molo'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/nature.jpg\",\r\n            _id:'naturecccc'\r\n        },\r\n    ];\r\n    const bg2 = [\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/nature-2679131_1280.jpg\",\r\n            _id:'2679131_1280'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/nature-2829157_1280.png\",\r\n            _id:'2829157_1280'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/nature-4407819_960_720.png\",\r\n            _id:'4407819_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/night-rocket-sky-astronomy-blue-bright-1574183-pxhere.com.jpg\",\r\n            _id:'1574183'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/ocean-background-4090017_960_720.jpg\",\r\n            _id:'4090017_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/playground-2108649_960_720.png\",\r\n            _id:'2108649_960_720'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/seascape-backdrop.jpg\",\r\n            _id:'seascape-backdrop.'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/sunset.JPG\",\r\n            _id:'sunset'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/the-house-in-the-field.jpg\",\r\n            _id:'house-in-the-fie'\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"backgrounds/tree-sky-air-balloon-hot-air-balloon-wind-1210393-pxhere.com.jpg\",\r\n            _id:'1210393'\r\n        }\r\n    ];\r\n\r\n    const fantastic_characters = [\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/001-centaur.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/002-kraken.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/003-dinosaur.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/004-tree-1.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/005-hand.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/006-echidna.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/007-robot.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/008-mushroom.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/009-harpy.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/010-phoenix.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/011-dragon-1.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/012-devil.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/013-troll.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/014-alien.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/015-minotaur.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/016-madre-monte.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/017-satyr.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/018-karakasakozou.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/019-pirate.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/020-werewolf.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/021-scarecrow.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/022-valkyrie.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/023-curupira.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/024-loch-ness-monster.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/025-tree.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/026-cerberus.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/027-gryphon.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/028-mermaid.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/029-vampire.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/030-goblin.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/031-yeti.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/032-leprechaun.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/033-medusa.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/034-chimera.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/035-elf.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/036-hydra.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/037-cyclops.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/038-pegasus.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/039-narwhal.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/040-woodcutter.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/041-zombie.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/042-dragon.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/043-frankenstein.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/044-witch.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/045-fairy.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/046-genie.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/047-pinocchio.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/048-ghost.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/049-wizard.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"fantastic-characters/050-unicorn.png\"\r\n        },\r\n        // {\r\n        //     path: window.STATIC.IMAGE_BASE_PATH + \"storylet-prof.png\"\r\n        // }\r\n    ];\r\n    const sea_life = [\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/001-octopus.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/002-crab.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/003-oyster.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/004-dolphin.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/005-starfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/006-flounder.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/007-shark.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/008-whale.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/009-fish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/010-swordfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/011-turtle.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/012-jellyfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/013-seahorse.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/014-puffer-fish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/015-sea-cow.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/016-orca.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/017-squid.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/018-coral.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/019-manta-ray.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/020-lobster.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/021-clam.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/022-seaweed.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/023-tuna.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/024-stingray.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/025-seal.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/026-eel.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/027-seagull.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/028-shrimp.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/029-anglerfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/030-beluga.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/031-walrus.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/032-narwhal.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/033-diver.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/034-penguin.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/035-hammerhead-fish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/036-hermit-crab.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/037-clownfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/038-surgeon-fish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/039-angelfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/040-sunfish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/041-sea-anemone.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/042-coral-1.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/043-fish-1.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/044-fish-2.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/045-cod.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/046-cuttlefish.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/047-nautilus.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/048-puffin.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/049-mussel.png\"\r\n        },\r\n        {\r\n            path: window.STATIC.IMAGE_BASE_PATH + \"sea-life/050-sea-urchin.png\"\r\n        }\r\n    ];\r\n\r\n    const [images, setImages] = useState([]);\r\n    const [selectedGallery, setSelectedGallery] = useState([]);\r\n    const [selectedColor, setSelectedColor] = useState('#fafafa');\r\n    const [selectedImg, setSelectedImg] = useState({});\r\n\r\n    useEffect(()=>{\r\n        if(!type)\r\n            return;\r\n        const uploads = [];\r\n\r\n        if(window.RESOURCES && window.RESOURCES.IMAGES)\r\n            for(let i=0; i<window.RESOURCES.IMAGES.length; i++)\r\n                if(window.RESOURCES.IMAGES[i].type === type)\r\n                    uploads.push(window.RESOURCES.IMAGES[i]);\r\n\r\n        images[0] = uploads;\r\n        if(type === 'background') {\r\n            images[1] = bg1;\r\n            images[2] = bg2;\r\n        } else if(type === 'image') {\r\n            images[1] = fantastic_characters;\r\n            images[2] = sea_life;\r\n        }\r\n\r\n        setImages(images);\r\n        setSelectedGallery(uploads.length ? images[0] :  images[1]);\r\n    }, [type]);\r\n\r\n    function selectGallery(idx) {\r\n        setSelectedGallery(images[idx]);\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let options = [];\r\n        if(hasUploads())\r\n            options.push(<Option key={0} value=\"0\">{translate('optionUploads', ln)}</Option>)\r\n        if(type === 'background') {\r\n            options.push(<Option key={1} value=\"1\">{translate('optionBG1', ln)}</Option>)\r\n            options.push(<Option key={2} value=\"2\">{translate('optionBG2', ln)}</Option>)\r\n        } else if(type === 'image') {\r\n            options.push(<Option key={1} value=\"1\">{translate('fantasticCharacters', ln)}</Option>)\r\n            options.push(<Option key={2} value=\"2\">{translate('seaLife', ln)}</Option>)\r\n        }\r\n        return options;\r\n    };\r\n\r\n    const hasUploads = () => {\r\n        return images[0] && images[0].length;\r\n    };\r\n\r\n    const { Option } = Select;\r\n\r\n    const isSelected = (id) => {\r\n        if(selectedImg._id)\r\n            return selectedImg._id === id;\r\n        return selectedImg.path === id;\r\n    };\r\n\r\n    const handleItemClick = (item) => {\r\n        setSelectedImg(item);\r\n    };\r\n\r\n    const handleChangeComplete = (color) => {\r\n        setSelectedColor('rgba('+color.rgb.r+','+color.rgb.g+','+color.rgb.b+','+color.rgb.a+')');\r\n    };\r\n\r\n    return (\r\n        <Modal title={type==='image' ? translate('selectImage', ln) : translate('selectBackground', ln)}\r\n            visible={isOpened} width={'60vw'}\r\n            bodyStyle={{maxHeight:'60vh', overflowX:'auto', backgroundColor:'transparent', padding:8}}\r\n            onOk={() => closeGallery(selectedImg, selectedColor, type)}\r\n            onCancel={() => closeGallery({_id:'@close'})}\r\n\r\n            footer={[\r\n                <Select key=\"select\" defaultValue={hasUploads() ? \"0\" : \"1\"} onChange={selectGallery}>\r\n                    {getOptions()}\r\n                </Select>,\r\n                <Button key=\"cancel\" onClick={() => closeGallery({_id:'@close'})}>{translate('buttonCancel', ln)}</Button>,\r\n                <Button key=\"ok\" type=\"primary\" onClick={() => closeGallery(selectedImg, selectedColor, type)}>{translate('buttonOk', ln)}</Button>\r\n            ]}\r\n        >\r\n            <Row className={'ant-image-grid'} gutter={[8, 8]}>\r\n                <Col key={'@upload'} span={8}>\r\n                    <div className={'upload' + (isSelected('@upload') ? ' selected' : '')}\r\n                         onClick={()=>handleItemClick({_id:'@upload'})}\r\n                    >\r\n                        <AntUpload max={1} />\r\n                        <CheckOutlined className={'check'} />\r\n                    </div>\r\n                </Col>\r\n\r\n                {type === 'background' ? <Col key={'@color'} span={8}>\r\n                    <Popover content={(<SketchPicker color={selectedColor} onChangeComplete={handleChangeComplete}/>)}\r\n                             trigger=\"click\">\r\n                        <div className={'select-color' + (isSelected('@color') ? ' selected' : '')}\r\n                             onClick={() => handleItemClick({_id: '@color'})}\r\n                             style={{backgroundColor: selectedColor}}\r\n                        >\r\n                            <div className={'select-color-label'}>\r\n                                <BgColorsOutlined/>\r\n                                <div>{translate('selectColor', ln)}</div>\r\n                            </div>\r\n                            <CheckOutlined className={'check'}/>\r\n                        </div>\r\n                    </Popover>\r\n                </Col> : ''}\r\n                {selectedGallery.map(function(item, idx){\r\n                    return (\r\n                        <Col key={idx} span={8}>\r\n                            <div className={'img-preview' + (isSelected(item._id || item.path) ? ' selected' : '')}\r\n                                 style={{backgroundImage: 'url(' + item.path + ')'}}\r\n                                 onClick={()=>handleItemClick(item)}\r\n                            >\r\n                                {item.name ? <div className={'name'}>{item.name}</div> : ''}\r\n                                <CheckOutlined className={'check'} />\r\n                            </div>\r\n                        </Col>\r\n                    );\r\n                })}\r\n            </Row>\r\n        </Modal>\r\n    )\r\n};","const setSlidesData = (data) => {\r\n    return {\r\n        type: 'SET_SLIDES_DATA',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default setSlidesData","import React, {useState, useEffect, useRef} from 'react';\r\nimport {useSelector, useDispatch, batch} from 'react-redux'\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport { Input } from 'antd';\r\n\r\nimport WordContainer from './word-container'\r\nimport ImageGallery from '../image-gallery'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faComment, faLightbulb, faFileImage, faImage } from '@fortawesome/free-regular-svg-icons'\r\nimport { faFont, faPlusCircle, faTrashAlt, faCopy, faPlay, faArrowAltCircleUp, faArrowAltCircleDown, faUndo, faRedo } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport '../../style/container/menu-container.css'\r\nimport '../../vendor/tooltip.css';\r\n\r\nimport setSlidesData from \"../../reducer/actions/set-slides-data\";\r\nimport selectSlide from \"../../reducer/actions/select-slide\";\r\nimport selectComponent from \"../../reducer/actions/select-component\";\r\n\r\nimport {translate} from \"../helpers\";\r\n// import copyComponent from \"../../reducer/actions/copy-component\";\r\n\r\nexport default function MenuContainer() {\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const slidesData = useSelector(state => state.slidesData);\r\n    const selectedSlide = useSelector(state => state.selectedSlide);\r\n    const selectedComponent = useSelector(state => state.selectedComponent);\r\n\r\n    const [slideIdx, setSlideIdx] = useState(null);\r\n    // const [componentIdx, setComponentIdx] = useState(null);\r\n\r\n    const [startingWord, setStartingWord] = useState([]);\r\n    const searchKey = useRef(null);\r\n\r\n    const [isOpened, setIsOpened] = useState(false);\r\n    const [imagesType, setImagesType] = useState(false);\r\n    const [undoPointer, setUndoPointer] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        if(!selectedSlide)\r\n            return;\r\n\r\n        setSlideIdx(selectedSlide.index);\r\n    }, [selectedSlide]);\r\n\r\n    useEffect(()=>{\r\n        if(!selectedComponent)\r\n            return;\r\n\r\n        // setComponentIdx(selectedComponent.index);\r\n    }, [selectedComponent]);\r\n\r\n    const play_story = async () => {\r\n        window.open(window.STATIC.SITE_URL + 'storylet-viewer/' + window.STORY.DATA.id,'_blank')\r\n    };\r\n\r\n    // function confirm(e) {\r\n    //     play_story();\r\n    // }\r\n    //\r\n    // function cancel(e) {\r\n    //     play_story()\r\n    // }\r\n\r\n    const get_words = async () => {\r\n        setStartingWord([searchKey.current.value]);\r\n    };\r\n\r\n    const add_text = (isBalloon) =>  {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        let index = data[slideIdx].components.length;\r\n        // setComponentIdx(index);\r\n\r\n        let component = {\r\n            \"index\": index,\r\n            \"type\": \"text\",\r\n            \"subType\": \"balloon\",\r\n            \"value\": isBalloon ? translate('newSpeech', ln) : translate('newText', ln),\r\n            \"x\": 0,\r\n            \"y\": 0,\r\n            \"w\": 40,\r\n            \"h\": 20,\r\n            \"scale\": [1,1],\r\n            \"rotate\": 0,\r\n            \"keepRatio\": false,\r\n            \"zIndex\": 1,\r\n            \"fontSize\": 24,\r\n            \"color\": \"#000000\",\r\n            \"fontFamily\": '\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif',\r\n            \"balloon\": isBalloon ? \"balloon speech\" : \"\",\r\n            \"placement\": 'BL',\r\n        };\r\n\r\n        data[slideIdx].components.push(component);\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[slideIdx]));\r\n            dispatch(selectComponent(component));\r\n        });\r\n    };\r\n\r\n    const open_gallery = (type) => {\r\n        setImagesType(type);\r\n        setIsOpened(true);\r\n    };\r\n\r\n    const close_gallery = (item, color, type) => {\r\n        if(item._id === '@close') {\r\n            setIsOpened(false);\r\n        }\r\n        else if(item._id === '@color') {\r\n            let data = cloneDeep(slidesData);\r\n\r\n            data[slideIdx].background = undefined;\r\n            data[slideIdx].backgroundColor = color;\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data));\r\n                dispatch(selectSlide(data[slideIdx]));\r\n            });\r\n\r\n            setIsOpened(false);\r\n        }\r\n        else if(item._id === '@upload') {\r\n            //todo background or image?\r\n            alert('Aloha Andrea!')\r\n        }\r\n        else if(type === 'background') {\r\n            let data = cloneDeep(slidesData);\r\n\r\n            data[slideIdx].background = item.path;\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data));\r\n                dispatch(selectSlide(data[slideIdx]));\r\n            });\r\n\r\n            setIsOpened(false);\r\n        }\r\n        else if(type === 'image') {\r\n            let data = cloneDeep(slidesData);\r\n\r\n            let index = data[slideIdx].components.length;\r\n            // setComponentIdx(index);\r\n\r\n            let component = {\r\n                \"index\": index,\r\n                \"type\": \"image\",\r\n                \"x\": 0,\r\n                \"y\": 0,\r\n                \"w\": 40,\r\n                // \"h\": e.target.height / e.target.width * 40,\r\n                \"h\": 40,\r\n                \"scale\": [1,1],\r\n                \"rotate\": 0,\r\n                \"keepRatio\": true,\r\n                \"zIndex\": 0,\r\n                \"src\": item.path\r\n            };\r\n\r\n            data[slideIdx].components.push(component);\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data));\r\n                dispatch(selectSlide(data[slideIdx]));\r\n                dispatch(selectComponent(component));\r\n            });\r\n\r\n            setIsOpened(false);\r\n        }\r\n    };\r\n\r\n    const update_slides_index = (data, idx) => {\r\n        for(let i = idx; i<data.length; i++)\r\n            data[i].index +=1;\r\n    };\r\n\r\n    const add_slide = () => {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        let slide = {\r\n            id: Math.random().toString(36).substr(2, 8).toUpperCase(),\r\n            index:  data.length,\r\n            background: \"\",\r\n            components: [],\r\n            type: \"\"\r\n        };\r\n\r\n        if(slideIdx !== null)\r\n        {\r\n            slide.index = slideIdx + 1;\r\n            update_slides_index(data, slideIdx + 1);\r\n            data.splice(slideIdx + 1, 0, slide);\r\n        } else {\r\n            data.push(slide);\r\n        }\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[slideIdx+1]));\r\n            dispatch(selectComponent(null));\r\n        });\r\n    };\r\n\r\n    const copy_slide = () => {\r\n        let data = cloneDeep(slidesData);\r\n        let cloned_node = cloneDeep(data[slideIdx]);\r\n\r\n        cloned_node.id = Math.random().toString(36).substr(2, 8).toUpperCase();\r\n\r\n        update_slides_index(data, slideIdx);\r\n        data.splice(slideIdx, 0, cloned_node);\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[slideIdx+1]));\r\n            dispatch(selectComponent(null));\r\n        });\r\n    };\r\n\r\n    const remove_slide = () => {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        // if 1 slide return\r\n        if(data.length===1) {\r\n            alert('Impossibile eliminare la scena');//todo localization\r\n            return\r\n        }\r\n\r\n        //todo meglio!\r\n        data.splice(slideIdx, 1);\r\n        for(let i = 0; i< data.length; i++)\r\n            data[i].index = i;\r\n\r\n        let goto = slideIdx === 0 ? 0 : slideIdx-1;\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[goto]));\r\n            dispatch(selectComponent(null));\r\n        });\r\n    };\r\n\r\n    const move_up = () => {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        if(slideIdx===0)\r\n            return;\r\n\r\n        data[slideIdx].index -= 1;\r\n        data[slideIdx-1].index += 1;\r\n\r\n        let tmp = data[slideIdx];\r\n        data[slideIdx] = data[slideIdx-1];\r\n        data[slideIdx-1] = tmp;\r\n\r\n        let goto = slideIdx-1;\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[goto]));\r\n            dispatch(selectComponent(null));\r\n        });\r\n    };\r\n\r\n    const move_down = () => {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        if(slideIdx===data.length-1)\r\n            return;\r\n\r\n        data[slideIdx].index += 1;\r\n        data[slideIdx+1].index -= 1;\r\n\r\n        let tmp = data[slideIdx];\r\n        data[slideIdx] = data[slideIdx+1];\r\n        data[slideIdx+1] = tmp;\r\n\r\n        let goto = slideIdx+1;\r\n\r\n        batch(() => {\r\n            dispatch(setSlidesData(data));\r\n            dispatch(selectSlide(data[goto]));\r\n            dispatch(selectComponent(null));\r\n        });    };\r\n\r\n    /*ctrl-z*/\r\n    useEffect(()=>{\r\n        // console.log('pointer: ' + undoPointer);\r\n        document.removeEventListener(\"keydown\", undo_redo);\r\n        document.addEventListener(\"keydown\", undo_redo);\r\n        return function cleanup() {\r\n            document.removeEventListener(\"keydown\", undo_redo);\r\n        };\r\n    }, [undoPointer]);\r\n\r\n    useEffect(() => {\r\n        if(!slidesData || slidesData.length===0)\r\n            return;\r\n\r\n        if(selectedComponent !== 0) { // not if undo\r\n            let data = cloneDeep(slidesData);\r\n            let history = cloneDeep(window.HISTORY.DATA);\r\n            window.HISTORY.DATA = history.slice(0, undoPointer+1);\r\n\r\n            window.HISTORY.DATA.push(\r\n                {\r\n                    slidesData: data,\r\n                    slideIdx: slideIdx || data[0].index,\r\n                }\r\n            );\r\n\r\n            if(window.HISTORY.DATA.length > 6) // todo limit 5 undo\r\n                window.HISTORY.DATA.shift();\r\n\r\n            setUndoPointer(window.HISTORY.DATA.length-1);\r\n        }\r\n\r\n        // console.log(window.HISTORY.DATA.length + ' elementi');\r\n\r\n    }, [slidesData]);\r\n\r\n    const undo_redo = (event) => {\r\n        let key = event.which || event.keyCode; // keyCode detection\r\n        let ctrl = event.ctrlKey ? event.ctrlKey : key === 17; // ctrl detection\r\n\r\n        if (event === '@undo' || (key === 90 && ctrl)) {\r\n            if(undoPointer === 0)\r\n                return;\r\n            // console.log('UNDO '+(undoPointer-1));\r\n            let data = cloneDeep(window.HISTORY.DATA[undoPointer-1]);\r\n            setUndoPointer(undoPointer => undoPointer-1);\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data.slidesData));\r\n                dispatch(selectSlide(data.slidesData[data.slideIdx]));\r\n                dispatch(selectComponent(0));\r\n            });\r\n        }\r\n        else if (event === '@redo' || (key === 89 && ctrl)) {\r\n            if(undoPointer === window.HISTORY.DATA.length-1)\r\n                return;\r\n            // console.log('REDO '+(undoPointer+1));\r\n            let data = cloneDeep(window.HISTORY.DATA[undoPointer+1]);\r\n            setUndoPointer(undoPointer => undoPointer+1);\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data.slidesData));\r\n                dispatch(selectSlide(data.slidesData[data.slideIdx]));\r\n                dispatch(selectComponent(0));\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div id=\"menu-container\">\r\n                <div className=\"component-buttons-container\" >\r\n                    <div data-tooltip={translate('addText', ln)}>\r\n                        <FontAwesomeIcon icon={faFont} className=\"icon add-text\" onClick={()=> {add_text(false)}} />\r\n                    </div>\r\n                    <div data-tooltip={translate('addBalloon', ln)}>\r\n                        <FontAwesomeIcon icon={faComment} className=\"icon add-balloon\" onClick={()=> {add_text(true)}} />\r\n                    </div>\r\n                    <div data-tooltip={translate('addImage', ln)}>\r\n                        <FontAwesomeIcon icon={faFileImage} className=\"icon add-image\" onClick={()=>open_gallery('image')} />\r\n                    </div>\r\n                    <div data-tooltip={translate('addBackground', ln)}>\r\n                        <FontAwesomeIcon icon={faImage} className=\"icon add-bg\" onClick={()=>open_gallery('background')} />\r\n                    </div>\r\n                    <div className={'menu-separator'}> </div>\r\n                    <div data-tooltip={translate('undo', ln)}>\r\n                        <FontAwesomeIcon icon={faUndo} className=\"icon undo\" onClick={()=>undo_redo('@undo')} />\r\n                    </div>\r\n                    <div data-tooltip={translate('redo', ln)}>\r\n                        <FontAwesomeIcon icon={faRedo} className=\"icon undo\" onClick={()=>undo_redo('@redo')} />\r\n                    </div>\r\n                    <div className={'menu-separator'}> </div>\r\n                    <div data-tooltip={translate('playStoryPreview', ln)}>\r\n                        <FontAwesomeIcon icon={faPlay} className=\"icon open-preview\" onClick={play_story} />\r\n                        {/*<Popconfirm*/}\r\n                        {/*    placement=\"right\"*/}\r\n                        {/*    title={translate('saveBeforePlay', ln)}*/}\r\n                        {/*    onConfirm={confirm}*/}\r\n                        {/*    onCancel={cancel}*/}\r\n                        {/*    okText={translate('yes', ln)}*/}\r\n                        {/*    cancelText={translate('no', ln)}*/}\r\n                        {/*>*/}\r\n                        {/*    <FontAwesomeIcon icon={faPlay} className=\"icon open-preview\" />*/}\r\n                        {/*</Popconfirm>*/}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"slide-buttons-container\">\r\n                    <div data-tooltip={translate('moveUpSlide', ln)}>\r\n                        <FontAwesomeIcon icon={faArrowAltCircleUp} className=\"icon move-up-slide\" onClick={move_up} />\r\n                    </div>\r\n                    <div data-tooltip={translate('moveDownSlide', ln)}>\r\n                        <FontAwesomeIcon icon={faArrowAltCircleDown} className=\"icon move-down-slide\" onClick={move_down} />\r\n                    </div>\r\n                    <div data-tooltip={translate('removeSlide', ln)}>\r\n                        <FontAwesomeIcon icon={faTrashAlt} className=\"icon remove-slide\" onClick={remove_slide} />\r\n                    </div>\r\n                    <div data-tooltip={translate('duplicateSlide', ln)}>\r\n                        <FontAwesomeIcon icon={faCopy} className=\"icon duplicate-slide\" onClick={copy_slide} />\r\n                    </div>\r\n                    <div data-tooltip={translate('addSlide', ln)}>\r\n                        <FontAwesomeIcon icon={faPlusCircle} className=\"icon add-slide\" onClick={add_slide} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"find-ideas\">\r\n                    <div data-tooltip={translate('fantasyHelper', ln)}>\r\n                        <FontAwesomeIcon icon={faLightbulb} className=\"icon\" onClick={get_words} />\r\n                    </div>\r\n                    <Input placeholder={translate('keyword', ln)}\r\n                           id=\"SearchKey\" ref={searchKey}\r\n                           onKeyPress={(e)=>{if (e.key === 'Enter') get_words()}} />\r\n                </div>\r\n            </div>\r\n\r\n            <WordContainer startingWord={startingWord} />\r\n\r\n            <ImageGallery isOpened={isOpened} type={imagesType} closeGallery={close_gallery}  />\r\n        </>\r\n    )\r\n};","import React, {useEffect} from 'react'\r\nimport MenuContainer from './menu-container'\r\nimport Slide from '../slide'\r\n\r\nimport {batch, useDispatch, useSelector} from 'react-redux'\r\n\r\nimport '../../style/container/stage-container-style.css'\r\nimport componentSelected from \"../../reducer/actions/select-component\";\r\nimport setSlidesData from \"../../reducer/actions/set-slides-data\";\r\nimport selectSlide from \"../../reducer/actions/select-slide\";\r\n\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nexport default function StageContainer({isSettingVisible}) {\r\n    const dispatch = useDispatch();\r\n    const selectedSlide = useSelector(state => state.selectedSlide);\r\n    const copiedComponent = useSelector(state => state.copiedComponent);\r\n    const slidesData = useSelector(state => state.slidesData);\r\n\r\n    useEffect(()=>{\r\n        document.removeEventListener('keydown', add_component);\r\n        if(!copiedComponent || !selectedSlide)\r\n            return;\r\n        document.addEventListener(\"keydown\", add_component);\r\n        return function cleanup() {\r\n            document.removeEventListener('keydown', add_component);\r\n        };\r\n    }, [selectedSlide, copiedComponent]);\r\n\r\n    const add_component = (event) =>\r\n    {\r\n        let key = event.which || event.keyCode;\r\n        let ctrl = event.ctrlKey ? event.ctrlKey : key === 17;\r\n\r\n        if ( key === 86 && ctrl ) {\r\n            // alert('add ' + copiedComponent.src)\r\n            let data = cloneDeep(slidesData);\r\n            let component = cloneDeep(copiedComponent);\r\n\r\n            component.index = selectedSlide.components.length;\r\n\r\n            data[selectedSlide.index].components.push(component);\r\n\r\n            batch(() => {\r\n                dispatch(setSlidesData(data));\r\n                dispatch(selectSlide(data[selectedSlide.index]));\r\n                dispatch(componentSelected(component));\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div id=\"stage-container\">\r\n            <MenuContainer />\r\n            <div id=\"slide-wrapper\" onClick={(e) => {if(e.target.id === 'slide-wrapper' || e.target.id.indexOf('slide_') > -1) dispatch(componentSelected(null))}} >\r\n                {selectedSlide ? (<Slide isSettingVisible={isSettingVisible} parameters={selectedSlide} isEditable={true} />) : null}\r\n            </div>\r\n        </div>\r\n    )\r\n};","const copyComponent = (data) => {\r\n    return {\r\n        type: 'COPY_COMPONENT',\r\n        payload: data\r\n    };\r\n};\r\n\r\nexport default copyComponent","import React, {useState, useEffect} from 'react';\r\nimport {useSelector, useDispatch, batch} from 'react-redux'\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport { Form, Input, InputNumber, Select, Button, Row, Col, Divider, Tooltip, Popover } from 'antd';\r\nimport {\r\n    LockOutlined, UnlockOutlined, EyeOutlined, RotateRightOutlined,\r\n    BoldOutlined, ItalicOutlined, UnderlineOutlined, ClearOutlined,\r\n    FontColorsOutlined, HighlightOutlined, BgColorsOutlined, AlignCenterOutlined,\r\n    AlignLeftOutlined, AlignRightOutlined\r\n} from '@ant-design/icons';\r\nimport { SketchPicker } from 'react-color';\r\nimport {translate} from \"./helpers\";\r\n\r\nimport '../style/properties.css';\r\n\r\nimport setSlideData from \"../reducer/actions/set-slides-data\";\r\nimport setSelectComponent from \"../reducer/actions/select-component\";\r\nimport setSelectSlide from \"../reducer/actions/select-slide\";\r\nimport copyComponent from \"../reducer/actions/copy-component\";\r\n\r\nexport default function Properties() {\r\n    const dispatch = useDispatch();\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n    const slidesData = useSelector(state => state.slidesData);\r\n    const selectedSlide = useSelector(state => state.selectedSlide);\r\n    const selectedComponent = useSelector(state => state.selectedComponent);\r\n\r\n    const [selectedText, setSelectedText] = useState({startIndex:0, length:0});\r\n\r\n    const [form] = Form.useForm();\r\n    const size = window.screen.width <= 1280 ? \"small\" : \"middle \"; //todo large?\r\n    const top = window.screen.width <= 1280 ? 4 : 0; //todo large?\r\n\r\n    useEffect(()=>{\r\n        if(!slidesData || !selectedSlide || !selectedComponent)\r\n            return;\r\n\r\n        let component = slidesData[selectedSlide.index].components[selectedComponent.index];\r\n\r\n        setProperties(component);\r\n\r\n    }, [slidesData]);\r\n\r\n    useEffect(()=>{\r\n        document.removeEventListener(\"keydown\", copyAnPaste);\r\n        document.removeEventListener('keydown', canc);\r\n\r\n        if(!selectedComponent)\r\n            return;\r\n\r\n        setProperties(selectedComponent);\r\n\r\n        document.addEventListener(\"keydown\", copyAnPaste);\r\n        document.addEventListener('keydown', canc);\r\n        return function cleanup() {\r\n            document.removeEventListener(\"keydown\", copyAnPaste);\r\n            document.removeEventListener('keydown', canc);\r\n        };\r\n    }, [selectedComponent]);\r\n\r\n    const setProperties = (component) => {\r\n        form.setFieldsValue({\r\n            width: Math.round(component.w * 10) / 10,\r\n            height: Math.round(component.h * 10) / 10,\r\n            keepRatio: selectedComponent.keepRatio,\r\n            top: Math.round(component.x * 10) / 10,\r\n            left: Math.round(component.y * 10) / 10,\r\n            zIndex: component.zIndex,\r\n            scaleX: Math.round(component.scale[0] * 10) / 10,\r\n            scaleY: Math.round(component.scale[1] * 10) / 10,\r\n            rotate: Math.round(component.rotate * 10) / 10,\r\n\r\n            // textValue: component.value,\r\n            textValue: component.value ? component.value.replace(/<\\/?[^>]+(>|$)/g, \"\") : null,\r\n            fontFamily: selectedComponent.fontFamily,\r\n            fontSize: selectedComponent.fontSize,\r\n            color: selectedComponent.color,\r\n            fontWeight: selectedComponent.fontWeight,\r\n            fontStyle: selectedComponent.fontStyle,\r\n            textDecoration: selectedComponent.textDecoration,\r\n            textAlign: selectedComponent.textAlign,\r\n            backgroundColor: selectedComponent.backgroundColor,\r\n            balloon: selectedComponent.balloon,\r\n            placement: selectedComponent.placement\r\n        });\r\n    };\r\n\r\n    // Miscellaneous\r\n\r\n    const copyAnPaste = (event) => {\r\n        if(!selectedComponent)\r\n            return;\r\n        let key = event.which || event.keyCode; // keyCode detection\r\n        let ctrl = event.ctrlKey ? event.ctrlKey : key === 17; // ctrl detection\r\n\r\n        if ( key === 67 && ctrl ) {\r\n            let copiedComponent = cloneDeep(selectedComponent);\r\n            // copiedComponent.id = Math.random().toString(36).substr(2, 8).toUpperCase();\r\n            copiedComponent.index = null;\r\n            copiedComponent.x = 0;\r\n            copiedComponent.y = 0;\r\n            dispatch(copyComponent(copiedComponent));\r\n        }\r\n    };\r\n\r\n    const canc = (event) => {\r\n        if(event.keyCode === 46 && document.activeElement.tagName==='BODY')\r\n            removeComponent();\r\n    };\r\n\r\n    const removeComponent = () => {\r\n        let sd = cloneDeep(slidesData);\r\n        sd[selectedSlide.index].components.splice(selectedComponent.index,1);\r\n\r\n        for(let i=0; i<sd[selectedSlide.index].components.length; i++)\r\n            sd[selectedSlide.index].components[i].index = i;\r\n\r\n        let selected = cloneDeep(selectedSlide);\r\n        selected.components.splice(selectedComponent.index,1);\r\n\r\n        for(let i=0; i<selected.components.length; i++)\r\n            selected.components[i].index = i;\r\n\r\n        batch(() => {\r\n            dispatch(setSlideData(sd));\r\n            dispatch(setSelectSlide(selected));\r\n            dispatch(setSelectComponent(null));\r\n        });\r\n    };\r\n\r\n    const setTextProperties = (prop, val) => {\r\n        let slideIdx = selectedSlide.index;\r\n        let componentIdx = selectedComponent.index;\r\n\r\n        let data = cloneDeep(slidesData);\r\n\r\n        if(selectedText.length > 0) {\r\n            let value = data[slideIdx].components[componentIdx].value;\r\n            if(prop==='fontWeight')\r\n                data[slideIdx].components[componentIdx].value = formatSelected(value, 'font-weight:bold;');\r\n            else if(prop==='fontStyle')\r\n                data[slideIdx].components[componentIdx].value = formatSelected(value, 'font-style:italic;');\r\n            else if(prop==='textDecoration')\r\n                data[slideIdx].components[componentIdx].value = formatSelected(value, 'text-decoration:underline;');\r\n        }\r\n        else if(prop==='fontWeight') {\r\n            if (selectedComponent.fontWeight === undefined || selectedComponent.fontWeight === 'normal')\r\n                data[slideIdx].components[componentIdx].fontWeight = 'bold';\r\n            else\r\n                data[slideIdx].components[componentIdx].fontWeight = 'normal';\r\n        } else if(prop==='fontStyle') {\r\n            if(selectedComponent.fontStyle === undefined || selectedComponent.fontStyle === 'normal')\r\n                data[slideIdx].components[componentIdx].fontStyle = 'italic';\r\n            else\r\n                data[slideIdx].components[componentIdx].fontStyle = 'normal';\r\n        } else if(prop==='textDecoration') {\r\n            if(selectedComponent.textDecoration === undefined || selectedComponent.textDecoration === 'none')\r\n                data[slideIdx].components[componentIdx].textDecoration = 'underline';\r\n            else\r\n                data[slideIdx].components[componentIdx].textDecoration = 'none';\r\n        } else if(prop==='textAlign') {\r\n                data[slideIdx].components[componentIdx].textAlign = val;\r\n        } else if(prop==='clear') {\r\n            data[slideIdx].components[componentIdx].value = data[slideIdx].components[componentIdx].value.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n            data[slideIdx].components[componentIdx].fontFamily = '\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif';\r\n            data[slideIdx].components[componentIdx].fontSize = 24;\r\n            data[slideIdx].components[componentIdx].color = undefined;\r\n            data[slideIdx].components[componentIdx].backgroundColor = undefined;\r\n            data[slideIdx].components[componentIdx].fontWeight = undefined;\r\n            data[slideIdx].components[componentIdx].fontStyle = undefined;\r\n            data[slideIdx].components[componentIdx].textDecoration = undefined;\r\n            data[slideIdx].components[componentIdx].textAlign = undefined;\r\n        }\r\n\r\n        batch(() => {\r\n            dispatch(setSlideData(data));\r\n            dispatch(setSelectSlide(data[slideIdx]));\r\n            dispatch(setSelectComponent(data[slideIdx].components[componentIdx]));\r\n        });\r\n    };\r\n\r\n    const formatSelected = (value, style) => {\r\n            let str = value.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n            let firstPart = str.substr(0,selectedText.startIndex);\r\n            let selectedPart = str.substr(selectedText.startIndex,selectedText.length);\r\n            let lastPart = str.substr(selectedText.startIndex+selectedText.length,str.length);\r\n\r\n            return firstPart + \"<span style='\" + style + \"'>\" + selectedPart + \"</span>\" + lastPart;\r\n    };\r\n\r\n    const switchKeepRatio = () => {\r\n        let changedFields = {keepRatio: !slidesData[selectedSlide.index].components[selectedComponent.index].keepRatio};\r\n\r\n        onValuesChange(changedFields, changedFields);\r\n    };\r\n\r\n    const flip = (direction) => {debugger\r\n        let changedFields;\r\n\r\n        let scale =  slidesData[selectedSlide.index].components[selectedComponent.index].scale;\r\n        if(direction==='H')\r\n            changedFields = {scaleX: -scale[0], scaleY: scale[1]};\r\n        else // V\r\n            changedFields = {scaleX: scale[0], scaleY: -scale[1]};\r\n\r\n        form.setFieldsValue(changedFields);\r\n        onValuesChange(changedFields, changedFields);\r\n    };\r\n\r\n    const bringsUp = () => {\r\n        let maxIndex = 0;\r\n        for(let i=0; i<slidesData[selectedSlide.index].components.length; i++)\r\n            maxIndex = Math.max(maxIndex, slidesData[selectedSlide.index].components[i].zIndex);\r\n\r\n        let changedFields = {zIndex: maxIndex+1};\r\n        form.setFieldsValue(changedFields);\r\n        onValuesChange(changedFields);\r\n    };\r\n\r\n    // Form\r\n    const onValuesChange = (changedFields, allFields) => {\r\n        let _dispatch = false;\r\n        let slideIdx = selectedSlide.index;\r\n        let componentIdx = selectedComponent.index;\r\n        let data = cloneDeep(slidesData);\r\n\r\n        if(changedFields.width !== undefined && !isNaN(changedFields.width) && changedFields.width >= 5 && changedFields.width <= 100) {\r\n            if(selectedComponent.keepRatio) {\r\n                let ratio = changedFields.width / data[slideIdx].components[componentIdx].w;\r\n                data[slideIdx].components[componentIdx].w = changedFields.width;\r\n                data[slideIdx].components[componentIdx].h *= ratio;\r\n            }\r\n            else\r\n                data[slideIdx].components[componentIdx].w = changedFields.width;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.height !== undefined && !isNaN(changedFields.height) && changedFields.height >= 5 && changedFields.height <= 100) {\r\n            if(selectedComponent.keepRatio) {\r\n                let ratio = changedFields.height / data[slideIdx].components[componentIdx].h;\r\n                data[slideIdx].components[componentIdx].h = changedFields.height;\r\n                data[slideIdx].components[componentIdx].w *= ratio;\r\n            }\r\n            else\r\n                data[slideIdx].components[componentIdx].h = changedFields.height;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.top !== undefined && !isNaN(changedFields.top) && changedFields.top >= 0 && changedFields.top <= 100) {\r\n            data[slideIdx].components[componentIdx].x = changedFields.top;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.left !== undefined && !isNaN(changedFields.left) && changedFields.left >= 0 && changedFields.left <= 100) {\r\n            data[slideIdx].components[componentIdx].y = changedFields.left;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.zIndex !== undefined && !isNaN(changedFields.zIndex) && changedFields.zIndex >= 0 && changedFields.zIndex <= 10) {\r\n            data[slideIdx].components[componentIdx].zIndex = changedFields.zIndex;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.scaleX !== undefined && !isNaN(changedFields.scaleX) && ((changedFields.scaleX >= -2 && changedFields.scaleX <= -0.5) || (changedFields.scaleX <= 2 && changedFields.scaleX >= 0.5))){\r\n            data[slideIdx].components[componentIdx].scale = [changedFields.scaleX,allFields.scaleY];\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.scaleY !== undefined && !isNaN(changedFields.scaleY) && ((changedFields.scaleY >= -2 && changedFields.scaleY <= -0.5) || (changedFields.scaleY <= 2 && changedFields.scaleY >= 0.5))){\r\n            data[slideIdx].components[componentIdx].scale = [allFields.scaleX,changedFields.scaleY];\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.rotate !== undefined && !isNaN(changedFields.rotate) && changedFields.rotate >= -180 || changedFields.rotate <= 180){\r\n            data[slideIdx].components[componentIdx].rotate = changedFields.rotate;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.keepRatio !== undefined && typeof changedFields.keepRatio === \"boolean\"){\r\n            data[slideIdx].components[componentIdx].keepRatio = changedFields.keepRatio;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.textValue !== undefined) {\r\n            data[slideIdx].components[componentIdx].value = changedFields.textValue;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.fontFamily !== undefined) {\r\n            data[slideIdx].components[componentIdx].fontFamily = changedFields.fontFamily;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.fontSize !== undefined) {\r\n            data[slideIdx].components[componentIdx].fontSize = changedFields.fontSize;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.color !== undefined) {\r\n            if(selectedText.length > 0)\r\n                data[slideIdx].components[componentIdx].value = formatSelected(data[slideIdx].components[componentIdx].value, 'color:rgba('+changedFields.color.rgb.r+','+changedFields.color.rgb.g+','+changedFields.color.rgb.b+','+changedFields.color.rgb.a+')');\r\n            else\r\n                data[slideIdx].components[componentIdx].color = 'rgba('+changedFields.color.rgb.r+','+changedFields.color.rgb.g+','+changedFields.color.rgb.b+','+changedFields.color.rgb.a+')';\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.backgroundColor !== undefined) {\r\n            if(selectedText.length > 0)\r\n                data[slideIdx].components[componentIdx].value = formatSelected(data[slideIdx].components[componentIdx].value, 'background-color:rgba('+changedFields.backgroundColor.rgb.r+','+changedFields.backgroundColor.rgb.g+','+changedFields.backgroundColor.rgb.b+','+changedFields.backgroundColor.rgb.a+')');\r\n            else\r\n                data[slideIdx].components[componentIdx].backgroundColor = 'rgba('+changedFields.backgroundColor.rgb.r+','+changedFields.backgroundColor.rgb.g+','+changedFields.backgroundColor.rgb.b+','+changedFields.backgroundColor.rgb.a+')';\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.balloon !== undefined) {\r\n            data[slideIdx].components[componentIdx].balloon = changedFields.balloon;\r\n            _dispatch = true;\r\n        }\r\n        else if(changedFields.placement !== undefined) {\r\n            data[slideIdx].components[componentIdx].placement = changedFields.placement;\r\n            _dispatch = true;\r\n        }\r\n\r\n        if(_dispatch)\r\n            batch(() => {\r\n                dispatch(setSlideData(data));\r\n                dispatch(setSelectSlide(data[slideIdx]));\r\n                dispatch(setSelectComponent(data[slideIdx].components[componentIdx]));\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Form form={form} onValuesChange={onValuesChange}>\r\n            {selectedComponent.type === 'text' ?\r\n                <>\r\n                    {selectedComponent.subType === 'balloon' ?\r\n                        <>\r\n                            <Divider orientation={\"left\"} style={{marginTop: 0}}>{translate('balloon', ln)}</Divider>\r\n                            <Row>\r\n                                <Col span={12}>\r\n                                    <Form.Item labelCol={{span: 8}} wrapperCol={{span: 14}} name={\"balloon\"}\r\n                                               label={translate('balloonType', ln)}>\r\n                                        <Select defaultValue={'balloon speech'} size={size}>\r\n                                            {/*<Select.Option value={''}>{translate('noneOpt', ln)}</Select.Option>*/}\r\n                                            <Select.Option\r\n                                                value={'balloon speech'}>{translate('speechOpt', ln)}</Select.Option>\r\n                                            <Select.Option\r\n                                                value={'balloon thought'}>{translate('thoughtOpt', ln)}</Select.Option>\r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={12}>\r\n                                    <Form.Item labelCol={{span: 8}} wrapperCol={{span: 14}} name={\"placement\"}\r\n                                               label={translate('balloonPlacement', ln)}>\r\n                                        <Select size={size} defaultValue={'BL'}>\r\n                                            <Select.Option value={'BL'}>{translate('BL', ln)}</Select.Option>\r\n                                            <Select.Option value={'BR'}>{translate('BR', ln)}</Select.Option>\r\n                                            <Select.Option value={'TL'}>{translate('TL', ln)}</Select.Option>\r\n                                            <Select.Option value={'TR'}>{translate('TR', ln)}</Select.Option>\r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                        </>: <Divider orientation={\"left\"} style={{marginTop:0}}>{translate('text', ln)}</Divider>\r\n                    }\r\n                    {/*<Divider orientation={\"left\"} style={{marginTop:0}}>{translate('text', ln)}</Divider>*/}\r\n                    <Row className={\"text-properties\"}>\r\n                        <Col span={24}>\r\n                            <Button icon={<BoldOutlined />} size={size} onClick={()=>{setTextProperties('fontWeight')}} />\r\n                            <Button icon={<ItalicOutlined />} size={size} onClick={()=>{setTextProperties('fontStyle')}} />\r\n                            <Button icon={<UnderlineOutlined />} size={size} onClick={()=>{setTextProperties('textDecoration')}} />\r\n                            <Popover content={(<Form.Item name={\"color\"}><SketchPicker color={selectedComponent.color} /></Form.Item>)} trigger=\"click\">\r\n                                <Button icon={<FontColorsOutlined />} size={size} />\r\n                            </Popover>\r\n                            <Button icon={<ClearOutlined />} size={size} onClick={()=>{setTextProperties('clear')}} />\r\n                            <div className={\"h-divider\"}> </div>\r\n                            {selectedComponent.subType === 'balloon' ?\r\n                                <>\r\n                                    <Button icon={<AlignLeftOutlined />} size={size} onClick={()=>{setTextProperties('textAlign', 'left')}} />\r\n                                    <Button icon={<AlignCenterOutlined />} size={size} onClick={()=>{setTextProperties('textAlign', 'center')}} />\r\n                                    <Button icon={<AlignRightOutlined />} size={size} onClick={()=>{setTextProperties('textAlign', 'right')}} />\r\n                                </> : null\r\n                            }\r\n                            <Popover content={(<Form.Item name={\"backgroundColor\"}><SketchPicker color={selectedComponent.backgroundColor} /></Form.Item>)} trigger=\"click\">\r\n                                <Button icon={<BgColorsOutlined />} size={size} />\r\n                            </Popover>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={24}>\r\n                            <Form.Item name={\"textValue\"}>\r\n                                <Input.TextArea rows={4} onBlur={(e)=>{setSelectedText({startIndex: e.target.selectionStart, length: window.getSelection().toString().length})}} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={18}>\r\n                            <Form.Item name={\"fontFamily\"}>\r\n                                <Select style={{width:'90%'}} defaultValue={0} size={size}>\r\n                                    <Select.Option value={'\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif'}>\"Helvetica Neue\",Roboto,Arial,\"Droid Sans\",sans-serif</Select.Option>\r\n                                    <Select.Option value={'Georgia, serif'}>Georgia, serif</Select.Option>\r\n                                    <Select.Option value={'\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif'}>\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif</Select.Option>\r\n                                    <Select.Option value={'\"Times New Roman\", Times, serif'}>\"Times New Roman\", Times, serif</Select.Option>\r\n                                    <Select.Option value={'Arial, Helvetica, sans-serif'}>Arial, Helvetica, sans-serif</Select.Option>\r\n                                    <Select.Option value={'\"Arial Black\", Gadget, sans-serif'}>\"Arial Black\", Gadget, sans-serif</Select.Option>\r\n                                    <Select.Option value={'\"Comic Sans MS\", cursive, sans-serif'}>\"Comic Sans MS\", cursive, sans-serif</Select.Option>\r\n                                    <Select.Option value={'Impact, Charcoal, sans-serif'}>Impact, Charcoal, sans-serif</Select.Option>\r\n                                    <Select.Option value={'\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif'}>\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif</Select.Option>\r\n                                    <Select.Option value={'Tahoma, Geneva, sans-serif'}>Tahoma, Geneva, sans-serif</Select.Option>\r\n                                    <Select.Option value={'\"Trebuchet MS\", Helvetica, sans-serif'}>\"Trebuchet MS\", Helvetica, sans-serif</Select.Option>\r\n                                    <Select.Option value={'Verdana, Geneva, sans-serif'}>Verdana, Geneva, sans-serif</Select.Option>\r\n                                    <Select.Option value={'\"Courier New\", Courier, monospace'}>\"Courier New\", Courier, monospace</Select.Option>\r\n                                    <Select.Option value={'\"Lucida Console\", Monaco, monospace'}>\"Lucida Console\", Monaco, monospace</Select.Option>\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={6}>\r\n                            <Form.Item name={\"fontSize\"}>\r\n                                <Select style={{width:'100%'}} defaultValue={16} size={size}>\r\n                                    <Select.Option value={8}>8</Select.Option>\r\n                                    <Select.Option value={9}>9</Select.Option>\r\n                                    <Select.Option value={10}>10</Select.Option>\r\n                                    <Select.Option value={11}>11</Select.Option>\r\n                                    <Select.Option value={12}>12</Select.Option>\r\n                                    <Select.Option value={14}>14</Select.Option>\r\n                                    <Select.Option value={16}>16</Select.Option>\r\n                                    <Select.Option value={18}>18</Select.Option>\r\n                                    <Select.Option value={24}>24</Select.Option>\r\n                                    <Select.Option value={30}>30</Select.Option>\r\n                                    <Select.Option value={36}>36</Select.Option>\r\n                                    <Select.Option value={48}>48</Select.Option>\r\n                                    <Select.Option value={60}>60</Select.Option>\r\n                                    <Select.Option value={72}>72</Select.Option>\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                </> : null\r\n            }\r\n            <Divider orientation={\"left\"} style={{marginTop:0}}>{translate('size', ln)}</Divider>\r\n            <Row>\r\n                <Col span={12}>\r\n                    <Form.Item name={\"width\"} label={translate('width', ln)} >\r\n                        <InputNumber min={5} max={100} defaultValue={20} size={size} />\r\n                    </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                    <Form.Item label={translate('height', ln)} >\r\n                        <Input.Group compact>\r\n                            <Form.Item name={\"height\"}>\r\n                                <InputNumber min={5} max={100} defaultValue={20} size={size} />\r\n                            </Form.Item>\r\n                            <Tooltip title={translate('keepRatio', ln)}>\r\n                                <Button style={{top:top}} type=\"primary\" icon={selectedComponent.keepRatio ? <LockOutlined /> : <UnlockOutlined />} size={size} onClick={switchKeepRatio} />\r\n                            </Tooltip>\r\n                        </Input.Group>\r\n                    </Form.Item>\r\n                </Col>\r\n            </Row>\r\n            <Divider orientation={\"left\"} style={{marginTop:0}}>{translate('position', ln)}</Divider>\r\n            <Row>\r\n                <Col span={12}>\r\n                    <Form.Item name={\"top\"} label={translate('top', ln)}>\r\n                        <InputNumber min={0} max={100} defaultValue={0} size={size} />\r\n                    </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                    <Form.Item name={\"left\"} label={translate('left', ln)}>\r\n                        <InputNumber min={0} max={100} defaultValue={0} size={size} />\r\n                    </Form.Item>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col span={24}>\r\n                    <Form.Item label={translate('zIndex', ln)}>\r\n                        <Input.Group compact>\r\n                            <Form.Item name={\"zIndex\"}>\r\n                                <InputNumber min={0} max={10} defaultValue={0} size={size} />\r\n                            </Form.Item>\r\n                            <Tooltip title={translate('bringsUp', ln)}>\r\n                                <Button style={{top:top}} type=\"primary\" icon={<EyeOutlined />} size={size} onClick={bringsUp} />\r\n                            </Tooltip>\r\n                        </Input.Group>\r\n                    </Form.Item>\r\n                </Col>\r\n            </Row>\r\n            <Divider orientation={\"left\"} style={{marginTop:0}}>{translate('scale', ln)}</Divider>\r\n            <Row>\r\n                <Col span={12}>\r\n                    <Form.Item label={translate('scaleX', ln)}>\r\n                        <Input.Group compact>\r\n                            <Form.Item name={\"scaleX\"}>\r\n                                <InputNumber min={-3} max={3} defaultValue={1} step={0.1} size={size} />\r\n                            </Form.Item>\r\n                            <Tooltip title={translate('flipH', ln)}>\r\n                                <Button style={{top:top}} type=\"primary\" icon={<RotateRightOutlined />} size={size} onClick={()=>flip('H')} />\r\n                            </Tooltip>\r\n                        </Input.Group>\r\n                    </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                    <Form.Item label={translate('scaleY', ln)}>\r\n                        <Input.Group compact>\r\n                            <Form.Item name={\"scaleY\"}>\r\n                                <InputNumber min={-3} max={3} defaultValue={1} step={0.1} size={size} />\r\n                            </Form.Item>\r\n                            <Tooltip title={translate('flipV', ln)}>\r\n                                <Button style={{top:top}} type=\"primary\" icon={<RotateRightOutlined rotate={90} />} size={size} onClick={()=>flip('V')} />\r\n                            </Tooltip>\r\n                        </Input.Group>\r\n                    </Form.Item>\r\n                </Col>\r\n            </Row>\r\n            <Divider orientation={\"left\"} style={{marginTop:0}}>{translate('rotate', ln)}</Divider>\r\n            <Row>\r\n                <Col span={24}>\r\n                    <Form.Item name={\"rotate\"} label={translate('degrees', ln)}>\r\n                        <InputNumber min={-180} max={180} defaultValue={0} size={size} />\r\n                    </Form.Item>\r\n                </Col>\r\n            </Row>\r\n            <Divider style={{margin:0}}>\r\n                <Button type=\"primary\" danger onClick={removeComponent}>{translate('delete', ln)}</Button>\r\n            </Divider>\r\n        </Form>\r\n    );\r\n};","import React, {useEffect, useState} from 'react'\r\nimport {batch, useDispatch, useSelector} from 'react-redux'\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport { Input, Select, Switch } from 'antd';\r\n\r\nimport {translate} from \"../helpers\";\r\n// import TextProperties from '../slide-components/properties/text-properties'\r\n// import ImageProperties from '../slide-components/properties/image-properties'\r\nimport Properties from '../properties'\r\n\r\nimport '../../style/container/properties-container.css'\r\nimport setStorylet from \"../../reducer/actions/set-storylet\";\r\n\r\n// import { useDebounce } from 'use-debounce';\r\nimport { useDebouncedCallback } from 'use-debounce';\r\n\r\nexport default function PropertiesContainer()\r\n{\r\n    const dispatch = useDispatch();\r\n\r\n    const ln = useSelector(state => state.selectedLanguage);\r\n    const storylet = useSelector(state => state.storylet);\r\n    const selectedComponent = useSelector(state => state.selectedComponent);\r\n    const [selectedTab, setSelectedTab] = useState(1);\r\n    const [autoplay, setAutoplay] = useState(false);\r\n    const [template, setTemplate] = useState(\"linear\");\r\n\r\n    const [name, setName] = useState(\"\");\r\n    // const [endName] = useDebounce(name, 1000);\r\n\r\n    const [debouncedName] = useDebouncedCallback(\r\n        // function\r\n        (value) => {\r\n            set_name(value);\r\n        },\r\n        // delay in ms\r\n        1000\r\n    );\r\n\r\n    const [description, setDescription] = useState(\"\");\r\n    // const [endDescription] = useDebounce(description, 1000);\r\n\r\n    const [debouncedDescription] = useDebouncedCallback(\r\n        // function\r\n        (value) => {\r\n            set_description(value);\r\n        },\r\n        // delay in ms\r\n        1000\r\n    );\r\n\r\n\r\n    useEffect(() => {\r\n        if(storylet) {\r\n            if(storylet.name)\r\n                setName(storylet.name);\r\n\r\n            if(storylet.description)\r\n                setDescription(storylet.description);\r\n\r\n            if(storylet.viewer && storylet.viewer.autoplay)\r\n                setAutoplay(storylet.viewer.autoplay);\r\n\r\n            if(storylet.viewer && storylet.viewer.template)\r\n                setTemplate(storylet.viewer.template);\r\n        }\r\n    }, [storylet]);\r\n\r\n    useEffect(() => {\r\n        if(!selectedComponent)\r\n            return;\r\n\r\n        setSelectedTab(0);\r\n    }, [selectedComponent]);\r\n\r\n    const set_template = (value) => {\r\n        let data = cloneDeep(storylet);\r\n\r\n        data.viewer.template = value;\r\n\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n\r\n        setTemplate(value);\r\n    };\r\n\r\n    const set_autoplay = () => {\r\n        let data = cloneDeep(storylet);\r\n\r\n        data.viewer.autoplay = !autoplay;\r\n\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n\r\n        setAutoplay(!autoplay);\r\n    };\r\n\r\n    const set_name = (name) => {\r\n        let data = cloneDeep(storylet);\r\n        data.name = name;\r\n        setName(name);\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n    };\r\n\r\n\r\n    const set_description = (description) => {\r\n        let data = cloneDeep(storylet);\r\n        data.description = description;\r\n        setDescription(description);\r\n        batch(() => {\r\n            dispatch(setStorylet(data));\r\n        });\r\n    };\r\n\r\n    function selectTab(e) {\r\n        setSelectedTab(e._targetInst.index);\r\n    }\r\n\r\n    return (\r\n        <div className=\"properties-container noselect\">\r\n            <div className=\"tabs\">\r\n                <div className={selectedTab === 0 ? \"tab selected\" : \"tab\"} onClick={selectTab}>{translate('component', ln)}</div>\r\n                <div className={selectedTab === 1 ? \"tab selected\" : \"tab\"} onClick={selectTab}>{translate('slide', ln)}</div>\r\n            </div>\r\n            <div className={selectedTab === 0 ? \"properties col-md-12 show\" : \"properties col-md-12\"}>\r\n            {\r\n                (() =>\r\n                {\r\n                    if (!selectedComponent) return null;\r\n                    switch (selectedComponent.type) {\r\n                        case 'text'  :\r\n                            return (<Properties/>);\r\n                        case 'image' :\r\n                            return (<Properties/>);\r\n                        default : break;\r\n                    }\r\n                    return null;\r\n                })()\r\n            }\r\n            </div>\r\n            <div className={(selectedTab === 1 ? \"properties col-md-12 show\" : \"properties col-md-12\") + \" slide\"}>\r\n                <div className=\"property-row\">\r\n                    <label className=\"template-label\">{translate('title', ln)}</label>\r\n                </div>\r\n                <Input defaultValue={name} onChange={(value) => debouncedName(value)} />\r\n                <div className=\"property-row\">\r\n                    <label className=\"template-label\">{translate('description', ln)}</label>\r\n                </div>\r\n                <Input.TextArea defaultValue={description} onChange={(value) => debouncedDescription(value)} />\r\n                <div className=\"property-row\">\r\n                    <label className=\"template-label\">{translate('template', ln)}</label>\r\n                </div>\r\n                <Select style={{width:'100%'}} value={template} onChange={set_template}>\r\n                    <Select.Option value=\"linear\">{translate('linear', ln)}</Select.Option>\r\n                    <Select.Option value=\"snail\">{translate('snail', ln)}</Select.Option>\r\n                    <Select.Option value=\"cube\">{translate('cube', ln)}</Select.Option>\r\n                </Select>\r\n                <div className=\"property-row\">\r\n                    <label className=\"template-label\">{translate('autoplay', ln)}</label>\r\n                    <Switch style={{marginLeft:8}} checked={autoplay} size={'small'} onChange={set_autoplay}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React from 'react'\r\nimport SlideContainer from './slide-container'\r\nimport StageContainer from './stage-container'\r\nimport PropertiesContainer from './properties-container'\r\n\r\nimport '../../style/container/body-container.css'\r\n\r\nexport default function BodyContainer({isSettingVisible})\r\n{\r\n    return (\r\n        <div className={'body-container ' + (isSettingVisible ? '' : 'hideSettings')}>\r\n\r\n            <SlideContainer />\r\n\r\n            <StageContainer isSettingVisible={isSettingVisible} />\r\n\r\n            <PropertiesContainer />\r\n\r\n        </div>\r\n    )\r\n};","import React, {useState, useEffect} from 'react';\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport Moveable from 'react-moveable';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nimport setSlidesData from '../../reducer/actions/set-slides-data'\r\n\r\nexport default function MoveableComponent() {\r\n    const dispatch = useDispatch();\r\n\r\n    const slidesData = useSelector(state => state.slidesData);\r\n    const selectedSlide = useSelector(state => state.selectedSlide);\r\n    const selectedComponent = useSelector(state => state.selectedComponent);\r\n\r\n    const [target, setTarget] = useState(null);\r\n    const [slide, setSlide] = useState(null);\r\n    const [slideIdx, setSlideIdx] = useState(null);\r\n    const [componentIdx, setComponentIdx] = useState(null);\r\n\r\n    // Component Parameters\r\n    const [position, setPosition] = useState(null);\r\n    const [size, setSize] = useState(null);\r\n    const [scale, setScale] = useState(null);\r\n    const [rotate, setRotate] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        setTarget(null);\r\n        if(selectedSlide && selectedComponent) {\r\n            setSlideIdx(selectedSlide.index);\r\n            setComponentIdx(selectedComponent.index);\r\n            setPosition(null);\r\n            setSize(null);\r\n            setScale(selectedComponent.scale);\r\n            setRotate(selectedComponent.rotate);\r\n            setSlide(document.getElementById(\"slide-wrapper\").children[0]);\r\n            setTimeout(()=>{setTarget(document.getElementById(\"component-\"+selectedComponent.index));}, 0);\r\n        } else {\r\n            setSlideIdx(null);\r\n            setComponentIdx(null);\r\n        }\r\n    }, [slidesData, selectedSlide, selectedComponent]);\r\n\r\n    //todo check range here and in dom\r\n    //todo normalize rotate\r\n    function setComponentParameters(name, value) {\r\n        let data = cloneDeep(slidesData);\r\n\r\n        switch (name) {\r\n            case \"size\":\r\n                data[slideIdx].components[componentIdx].w = value[0];\r\n                data[slideIdx].components[componentIdx].h = value[1];\r\n                break;\r\n            case \"position\":\r\n                data[slideIdx].components[componentIdx].x = value[0];\r\n                data[slideIdx].components[componentIdx].y = value[1];\r\n                break;\r\n            case \"scale\":\r\n                data[slideIdx].components[componentIdx].scale = value;\r\n                break;\r\n            case \"rotate\":\r\n                data[slideIdx].components[componentIdx].rotate = value;\r\n                break;\r\n        }\r\n\r\n        dispatch(setSlidesData(data));\r\n    }\r\n\r\n    return (\r\n        <Moveable\r\n            target={target}\r\n\r\n            draggable={true}\r\n            rotatable={true}\r\n            // resizable={selectedComponent ? selectedComponent.type ==='image' : false}\r\n            // scalable={selectedComponent ? selectedComponent.type ==='text' : false}\r\n            resizable={true}\r\n            scalable={false}\r\n\r\n            origin={false}\r\n\r\n            keepRatio={selectedComponent ? selectedComponent.keepRatio : false}\r\n\r\n            // DRAG\r\n            onDrag={({target, left, top, beforeDelta}) => {\r\n                setPosition([left, top]);\r\n                target.style.left = left + \"px\";\r\n                target.style.top = top + \"px\";\r\n            }}\r\n            onDragEnd={() => {\r\n                if(position===null)\r\n                    return;\r\n                let x = position[0]/slide.offsetWidth*100;\r\n                let y = position[1]/slide.offsetHeight*100;\r\n                selectedComponent.x = x;\r\n                selectedComponent.y = y;\r\n                setComponentParameters(\"position\", [x,y]);\r\n            }}\r\n\r\n            // RESIZE\r\n            onResize={({target, width, height, dist}) => {\r\n                setSize([width, height]);\r\n                target.style.width = width + \"px\";\r\n                target.style.height = height + \"px\";\r\n            }}\r\n            onResizeEnd={() => {\r\n                if(size===null)\r\n                    return;\r\n                let w = size[0]/slide.offsetWidth*100;\r\n                let h = size[1]/slide.offsetHeight*100;\r\n                selectedComponent.w = w;\r\n                selectedComponent.h = h;\r\n                setComponentParameters('size', [w,h]);\r\n            }}\r\n\r\n            // SCALE\r\n            onScale={({target, delta}) => {\r\n                setScale([scale[0]*delta[0],scale[1]*delta[1]])\r\n                target.style.transform\r\n                    = \"scale(\" + scale[0] +  \",\" + scale[1] + \") \"\r\n                    + \"rotate(\" + rotate +  \"deg)\";\r\n            }}\r\n            onScaleEnd={() => {\r\n                selectedComponent.scale = scale;\r\n                setComponentParameters(\"scale\", scale);\r\n            }}\r\n\r\n            // ROTATE\r\n            onRotate={({ target, beforeDelta, delta }) => {\r\n                setRotate(rotate + delta);\r\n                target.style.transform\r\n                    = \"scale(\" + scale[0] +  \",\" + scale[1] + \") \"\r\n                    + \"rotate(\" + rotate +  \"deg)\";\r\n            }}\r\n            onRotateEnd={() => {\r\n                selectedComponent.rotate = rotate;\r\n                setComponentParameters(\"rotate\", rotate);\r\n            }}\r\n\r\n            // SNAPPABLE\r\n            snappable={true}\r\n            bounds={{ left: document.documentElement.clientWidth*0.25, top: 56, bottom: document.documentElement.clientHeight-8, right: document.documentElement.clientWidth*0.75 }}\r\n            verticalGuidelines={[slide ? document.documentElement.clientWidth*0.50-slide.offsetWidth/2 : null, document.documentElement.clientWidth*0.50, slide ? document.documentElement.clientWidth*0.50+slide.offsetWidth/2 : null]}\r\n            horizontalGuidelines={[96+48, slide ? 96+slide.offsetHeight/2 : null, slide ? 96+48+slide.offsetHeight : null]}\r\n            snapCenter={true}\r\n            // elementGuidelines={[document.querySelector(\"#stage-container .image-moveable-container\")]}\r\n        />\r\n    )\r\n}","import React, {useEffect, useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport HeaderContainer from './components/container/header-container'\r\nimport BodyContainer from './components/container/body-container'\r\nimport MoveableComponent from \"./components/moveable/moveable-component\";\r\n\r\nimport setSlideData from './reducer/actions/set-slides-data'\r\nimport setStorylet from './reducer/actions/set-storylet'\r\n\r\nimport selectSlide from \"./reducer/actions/select-slide\";\r\nimport './StoryletCreator.css';\r\nimport 'antd/dist/antd.css';\r\n\r\nfunction StoryletCreator()\r\n{\r\n    const dispatch = useDispatch();\r\n\r\n    const [isSettingVisible, setIsSettingVisible] = useState(true);\r\n\r\n    useEffect(() =>\r\n    {\r\n        let metadata = JSON.parse(window.STORY.DATA.metadata);\r\n        let story = JSON.parse(window.STORY.DATA.story);\r\n        dispatch(setStorylet(metadata));\r\n        dispatch(setSlideData(story));\r\n        dispatch(selectSlide(story[0]));\r\n    }, []);\r\n\r\n    const hide_settings = () => {\r\n        setIsSettingVisible(!isSettingVisible);\r\n    };\r\n\r\n    return (\r\n     <>\r\n        <HeaderContainer hideSettings={hide_settings} />\r\n        <BodyContainer isSettingVisible={isSettingVisible} />\r\n        <MoveableComponent/>\r\n     </>\r\n    );\r\n}\r\n\r\nexport default StoryletCreator;","const storylet = (state = [], action) => {\r\n    switch (action.type){\r\n        case 'SET_STORYLET' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default storylet","const slidesData = (state = [], action) => {\r\n    switch (action.type){\r\n        case 'SET_SLIDES_DATA' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default slidesData","const selectedSlide = (state = null, action) => {\r\n    switch (action.type){\r\n        case 'SELECT_SLIDE' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default selectedSlide","const selectedComponent = (state = null, action) => {\r\n    switch (action.type){\r\n        case 'SELECT_COMPONENT' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default selectedComponent","const copiedComponent = (state = null, action) => {\r\n    switch (action.type){\r\n        case 'COPY_COMPONENT' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default copiedComponent","const selectedLanguage = (state = null, action) => {\r\n    switch (action.type){\r\n        case 'SELECT_LANGUAGE' : return action.payload;\r\n        default : return state;\r\n    }\r\n};\r\n\r\nexport default selectedLanguage","import {combineReducers} from 'redux'\r\n\r\nimport storylet from './storylet';\r\nimport slidesData from './slides-data'\r\nimport selectedSlide from './selected-slide'\r\nimport selectedComponent from './selected-component';\r\nimport copiedComponent from './copied-component';\r\nimport selectedLanguage from './selected-language';\r\n\r\nconst reducers = combineReducers({\r\n    storylet : storylet,\r\n    slidesData : slidesData,\r\n    selectedSlide : selectedSlide,\r\n    selectedComponent : selectedComponent,\r\n    copiedComponent : copiedComponent,\r\n    selectedLanguage : selectedLanguage\r\n});\r\n\r\nexport default reducers","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport StoryletCreator from './StoryletCreator';\r\n\r\nimport {createStore} from 'redux'\r\nimport {Provider} from 'react-redux'\r\nimport reducer from './reducer'\r\n\r\nconst store = createStore (reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\r\n\r\nReactDOM.render(<Provider store={store}><StoryletCreator /></Provider>, document.getElementById('root'));"],"sourceRoot":""}