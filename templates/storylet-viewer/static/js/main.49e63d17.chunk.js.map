{"version":3,"sources":["style/StyledSlide.js","component/text.js","component/image.js","component/Slide.js","App.js","index.js"],"names":["SlideStyle","styled","div","props","size","background","isParent","Text","component","onClick","isEditable","balloonFontSize","fontSize","w","TextComponent","y","x","h","scale","rotate","zIndex","fontFamily","color","fontWeight","fontStyle","textDecoration","textAlign","backgroundColor","className","balloon","placement","id","index","dangerouslySetInnerHTML","__html","value","Image","style","top","left","width","height","transform","position","overflow","src","alt","Slide","parameters","navigateLink","components","map","c","idx","type","key","storyLink","App","off","window","innerWidth","screen_width","useState","slideSize","setSlideSize","parentStory","setParentStory","currentStory","setCurrentStory","currentStoryMetadata","setCurrentStoryMetadata","navigate_link","storylet_id","a","async","fetch","API_ENDPOINT","GET_STORYLET","method","response","json","data","JSON","parse","story","useEffect","STORY","DATA","metadata","close_parent_story","back_to_parent_story","slides","slide","print_parent_story","steps","viewer","template","duration","filter","el","z","rotateX","rotateY","progress","fallbackMessage","hint","print_impress_story","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.49e63d17.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nconst SlideStyle = styled.div`\r\n  width: ${(props) => { \r\n            switch(props.size) {\r\n                case 'small' : return '5vw';\r\n                case 'medium': return '30vw';\r\n                case 'full'  : return '40vw';\r\n                case 'snail'  : return '700px';\r\n                case 'cube'  : return '700px';\r\n                default      : return '40vw';\r\n            }}\r\n          };\r\n  height: ${(props) => {\r\n                switch(props.size) {\r\n                    case 'small' : return '5vw';\r\n                    case 'medium': return '30vw';\r\n                    case 'full'  : return '40vw';\r\n                    case 'snail'  : return '700px';\r\n                    case 'cube'  : return '700px';\r\n                    default      : return '40vw';\r\n                }}\r\n            };\r\n  position: relative;\r\n  background: url(${(props) => props.background});\r\n  background-size: cover;\r\n  background-color: var(--storylet-white);\r\n  box-shadow: ${ (props) => props.isParent ?  '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,1)' : '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)' };\r\n  border-radius: 4px\r\n`;\r\n\r\nexport default SlideStyle","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport './slide.css';\r\n\r\nexport default function Text({component, onClick, isEditable})\r\n{\r\n    let balloonFontSize = component.fontSize*component.w*0.002;\r\n    const TextComponent = styled.div`\r\n        top:                ${props => props.y+'%'};\r\n        left:               ${props => props.x+'%'};\r\n        width:              ${props => props.w+'%'};\r\n        height:             ${props => props.h+'%'};\r\n        transform:          ${props => 'scale(' + props.scale[0] + ',' + props.scale[1] + ') rotate(' + props.rotate + 'deg)'};\r\n        z-index:            ${props => props.zIndex};\r\n        \r\n        font-family:         ${props => props.fontFamily};\r\n        font-size:           ${props => 0.1*(isEditable ? props.fontSize : props.fontSize/2)+'vw'};\r\n        color:               ${props => props.color};\r\n        font-weight:         ${props => props.fontWeight};\r\n        font-style:          ${props => props.fontStyle};\r\n        text-decoration:     ${props => props.textDecoration};\r\n        text-align:          ${props => props.textAlign};\r\n        background-color:    ${props => props.backgroundColor};\r\n        \r\n        & > div {\r\n            overflow: hidden\r\n        }\r\n        \r\n        &.balloon {\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            padding:            ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            border-radius:      ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            overflow: visible;\r\n            \r\n            white-space: break-spaces;\r\n            font-size:          ${(isEditable ? balloonFontSize : balloonFontSize/2)+'vw'};\r\n            text-align: center\r\n        }\r\n        \r\n        &.balloon:before, &.balloon:after {\r\n            content: ' ';\r\n            position: absolute;\r\n            width: 0;\r\n            height: 0;\r\n        }\r\n        \r\n        &.balloon.speech:before {\r\n            left:               ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            bottom:             ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border:             ${(isEditable ? 1.25 : 0.625)+'vw solid'};\r\n            border-color:       #212121 transparent transparent #212121;\r\n        }\r\n        \r\n        &.balloon.speech:after {\r\n            left:               ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            bottom:             ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border:             ${(isEditable ? 0.75 : 0.375)+'vw solid'};\r\n            border-color:       ${props => (props.backgroundColor ? props.backgroundColor : '#fff') + ' transparent transparent ' + (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n        }\r\n        \r\n        &.balloon.speech.BR:before {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            border-color:       #212121 #212121 transparent transparent;\r\n        }\r\n        \r\n        &.balloon.speech.BR:after {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            border-color:       ${props => (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff') + ' transparent transparent'};\r\n        }\r\n        \r\n        &.balloon.speech.TL:before {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border-color:       transparent transparent #212121 #212121;\r\n        }\r\n        \r\n        &.balloon.speech.TL:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border-color:       ${props =>  ' transparent transparent ' + (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff')};\r\n        }\r\n        \r\n        &.balloon.speech.TR:before {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.5 : 0.75)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.5 : 1.25)+'vw'};\r\n            border-color:       transparent #212121 #212121 transparent;\r\n        }\r\n        \r\n        &.balloon.speech.TR:after {\r\n            left:               initial\r\n            right:              ${(isEditable ? 1.9 : 0.95)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.4 : 0.7)+'vw'};\r\n            border-color:       ${props => 'transparent ' + (props.backgroundColor ? (props.backgroundColor + ' ' + props.backgroundColor) : '#fff #fff') + ' transparent'};\r\n        }\r\n        \r\n        &.balloon.thought {\r\n            border-radius:      ${(isEditable ? 10 : 5)+'vw'};\r\n            padding:            ${(isEditable ? 1 : 0.5)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought:before, .balloon.thought:after {\r\n            left:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            bottom:             ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n            width:              ${(isEditable ? 3 : 1.5)+'vw'};\r\n            height:             ${(isEditable ? 3 : 1.5)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            border-radius: 50%;\r\n        }\r\n        \r\n        &.balloon.thought:after {\r\n            left:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n            bottom:             ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n            width:              ${(isEditable ? 2 : 1)+'vw'};\r\n            height:             ${(isEditable ? 2 : 1)+'vw'};\r\n            background-color:   ${props => (props.backgroundColor ? props.backgroundColor : '#fff')};\r\n            border:             ${(isEditable ? 0.5 : 0.25)+'vw solid #212121'};\r\n            border-radius: 50%;\r\n        }\r\n        \r\n        &.balloon.thought.BR:before, .balloon.thought:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.BR:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TL:before, .balloon.thought:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TL:after {\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TR:before, .balloon.thought:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.5 : 0.25)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 1.75 : 0.875)+'vw'};\r\n        }\r\n        \r\n        &.balloon.thought.TR:after {\r\n            left:               initial\r\n            right:               ${(isEditable ? 0.25 : 0.125)+'vw'};\r\n            bottom:             initial\r\n            top:                ${-(isEditable ? 2.35 : 1.175)+'vw'};\r\n        }\r\n    `;\r\n\r\n    return (\r\n        <TextComponent {...component} className={\"text-moveable-container \"+(component.balloon ? component.balloon : \"\")+\" \"+(component.placement ? component.placement : \"\")} onClick={onClick} id={isEditable ? \"component-\"+component.index : \"\"}>\r\n            <div className={\"inner_text\"} dangerouslySetInnerHTML={{__html: component.value}} />\r\n            {/*{component.value}*/}\r\n        </TextComponent>\r\n    )\r\n};","import React from 'react'\r\n\r\nexport default function Image({component})\r\n{\r\n    return (\r\n        <div className=\"image-moveable-container\"\r\n        style={{\r\n            top:component.y+'%',\r\n            left:component.x+'%',\r\n            width:component.w+'%',\r\n            height:component.h+'%',\r\n            transform:'scale(' + component.scale[0] + ',' + component.scale[1] + ') rotate(' + component.rotate + 'deg)',\r\n            zIndex:component.zIndex,\r\n            position: 'absolute',\r\n            overflow: 'hidden'\r\n        }}>\r\n            <img style={{width:'100%', height:'100%'}} src={component.src} alt={component.src}/>\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport SlideStyle from '../style/StyledSlide'\r\nimport Text from '../component/text'\r\nimport Image from '../component/image'\r\n\r\nfunction Slide({parameters, size, navigateLink, isParent})\r\n{\r\n    return (\r\n        <SlideStyle background={parameters.background} backgroundColor={parameters.backgroundColor} size={size} isParent={isParent}>\r\n            {(() => {\r\n                    if (!parameters.components) return null;\r\n                    return parameters.components.map((c, idx) => {\r\n                        switch (c.type) {\r\n                            case 'text'  :\r\n                                return (\r\n                                    <Text key={idx} component={c}  />\r\n                                );\r\n                            case 'image' :\r\n                                return (\r\n                                    <Image key={idx} component={c} />\r\n                                );\r\n                        }\r\n                    })\r\n                }\r\n            )()}\r\n            {parameters.storyLink ? (<button onClick={() => navigateLink(parameters.storyLink)}>LINK</button>) : null }\r\n        </SlideStyle>\r\n    );\r\n\r\n}\r\n\r\nexport default Slide;","import React, {useState, useEffect} from 'react';\r\nimport { Impress, Step } from 'react-impressjs';\r\nimport Slide from \"./component/Slide\";\r\nimport './App.css'\r\n\r\nfunction App()\r\n{\r\n    const off          = window.innerWidth*0.4;\r\n    const screen_width = window.innerWidth;\r\n\r\n    const [slideSize, setSlideSize]       = useState('full');\r\n    const [parentStory, setParentStory]   = useState(null);\r\n    const [currentStory, setCurrentStory] = useState(null);\r\n    const [currentStoryMetadata, setCurrentStoryMetadata] = useState(null);\r\n\r\n    const navigate_link = async (storylet_id) =>\r\n    {\r\n        let response = await fetch(window.API_ENDPOINT.GET_STORYLET+'/'+storylet_id, {method: 'GET'});\r\n        let data = await response.json();\r\n\r\n        setParentStory(currentStory);\r\n        setCurrentStory(JSON.parse(data.data.story));\r\n        setSlideSize('medium');\r\n    };\r\n\r\n    useEffect(() => {\r\n        setCurrentStory(JSON.parse(window.STORY.DATA.story));\r\n        setCurrentStoryMetadata(JSON.parse(window.STORY.DATA.metadata));\r\n    }, []);\r\n\r\n    const print_parent_story = () =>\r\n    {\r\n        let slides = parentStory.map((slide, idx) =>\r\n            <Slide key={idx} parameters={slide} size={'small'} isParent={true} />\r\n        );\r\n\r\n        return (\r\n            <div className={'parentStory'} onClick={back_to_parent_story}>\r\n                <div className={'contentParentStory'}>\r\n                    {slides}\r\n                </div>\r\n                <div onClick={close_parent_story} className={'closeParentStory'}>CLOSE</div>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const print_impress_story = () =>\r\n    {\r\n        // debugger\r\n        let steps;\r\n        if(!currentStoryMetadata.viewer || currentStoryMetadata.viewer.template === \"linear\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                return (\r\n                    <Step key={idx} duration={1500} data={{x: idx === 0 ? 0 : ((screen_width-off)*idx)}}>\r\n                        <Slide key={idx} parameters={slide} size={slideSize} navigateLink={navigate_link}/>\r\n                    </Step>\r\n                )\r\n            })\r\n        }\r\n        else if(currentStoryMetadata.viewer.template === \"snail\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                if(idx < 13)\r\n                    return (\r\n                        <Step key={idx} duration={1500} data={{\r\n                            x: [-1000,0,1100,1900,2100,1800,1000,-100,-1200,-2000,-2300,0,3000][idx],\r\n                            y: [-1500,-1500,-1200,-400,700,1800,2600,2900,2600,1800,700,700,1500][idx],\r\n                            rotate: [0,0,30,60,90,120,150,180,210,240,270,720,0][idx],\r\n                            scale: [1,1,1,1,1,1,1,1,1,1,1,1,0.1][idx]\r\n                        }}>\r\n                            <Slide key={idx} parameters={slide} size=\"snail\" navigateLink={navigate_link}/>\r\n                        </Step>\r\n                    )\r\n            });\r\n            steps = steps.filter(function (el) {\r\n                return el != null;\r\n            });\r\n        }\r\n        else if(currentStoryMetadata.viewer.template === \"cube\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                if(idx < 6 )\r\n                    return (\r\n                        <Step key={idx} duration={1500} data={{x: [0,350,0,0,-350,0][idx], y: [0,0,350,-350,0,0][idx], z: [350,0,0,0,0,-350][idx], rotateX: [0,0,-90,90,0,0][idx], rotateY: [0,90,0,0,-90,-180][idx]}}>\r\n                            <Slide key={idx} parameters={slide} size=\"cube\" navigateLink={navigate_link}/>\r\n                        </Step>\r\n                    )\r\n            });\r\n            steps = steps.filter(function (el) {\r\n                return el != null;\r\n            });\r\n        }\r\n        return <Impress progress={true} fallbackMessage={<p>Error</p>} hint={false}>{steps}</Impress>;\r\n    };\r\n\r\n    const close_parent_story = () =>\r\n    {\r\n        setParentStory(null);\r\n        setSlideSize('full');\r\n    };\r\n\r\n    const back_to_parent_story = () =>\r\n    {\r\n        setCurrentStory(parentStory);\r\n        close_parent_story();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {parentStory && print_parent_story() }\r\n            {currentStory && print_impress_story() }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n"],"sourceRoot":""}