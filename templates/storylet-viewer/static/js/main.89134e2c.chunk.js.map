{"version":3,"sources":["style/StyledSlide.js","component/text.js","component/image.js","component/Slide.js","App.js","index.js"],"names":["SlideStyle","styled","div","props","size","background","isParent","Text","component","style","top","y","left","x","width","w","height","h","transform","scale","rotate","zIndex","fontSize","color","position","value","Image","className","src","alt","Slide","parameters","navigateLink","components","map","c","idx","type","key","storyLink","onClick","App","off","window","innerWidth","screen_width","useState","slideSize","setSlideSize","parentStory","setParentStory","currentStory","setCurrentStory","currentStoryMetadata","setCurrentStoryMetadata","navigate_link","storylet_id","a","async","fetch","API_ENDPOINT","GET_STORYLET","method","response","json","data","JSON","parse","story","useEffect","STORY","DATA","metadata","close_parent_story","back_to_parent_story","slides","slide","print_parent_story","steps","viewer","template","duration","filter","el","z","rotateX","rotateY","progress","fallbackMessage","hint","print_impress_story","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.89134e2c.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nconst SlideStyle = styled.div`\r\n  width: ${(props) => { \r\n            switch(props.size) {\r\n                case 'small' : return '5vw';\r\n                case 'medium': return '30vw';\r\n                case 'full'  : return '40vw';\r\n                case 'snail'  : return '700px';\r\n                case 'cube'  : return '700px';\r\n                default      : return '40vw';\r\n            }}\r\n          };\r\n  height: ${(props) => {\r\n                switch(props.size) {\r\n                    case 'small' : return '5vw';\r\n                    case 'medium': return '30vw';\r\n                    case 'full'  : return '40vw';\r\n                    case 'snail'  : return '700px';\r\n                    case 'cube'  : return '700px';\r\n                    default      : return '40vw';\r\n                }}\r\n            };\r\n  position: relative;\r\n  background: url(${(props) => props.background});\r\n  background-size: cover;\r\n  background-color: var(--storylet-white);\r\n  box-shadow: ${ (props) => props.isParent ?  '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,1)' : '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)' };\r\n  border-radius: 4px\r\n`;\r\n\r\nexport default SlideStyle","import React from 'react';\r\n\r\nexport default function Text({component})\r\n{\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                top:component.y+'%',\r\n                left:component.x+'%',\r\n                width:component.w+'%',\r\n                height:component.h+'%',\r\n                transform:'scale(' + component.scale[0] + ',' + component.scale[1] + ') rotate(' + component.rotate + 'deg)',\r\n                zIndex:component.zIndex,\r\n                fontSize:0.05 * component.fontSize +'vw',\r\n                color:component.color,\r\n                position:'absolute'\r\n        }}>{component.value}</div>\r\n    )\r\n};","import React from 'react'\r\n\r\nexport default function Image({component})\r\n{\r\n    return (\r\n        <div className=\"image-moveable-container\"\r\n        style={{\r\n            top:component.y+'%',\r\n            left:component.x+'%',\r\n            width:component.w+'%',\r\n            height:component.h+'%',\r\n            transform:'scale(' + component.scale[0] + ',' + component.scale[1] + ') rotate(' + component.rotate + 'deg)',\r\n            zIndex:component.zIndex,\r\n            position: 'absolute'\r\n        }}>\r\n            <img style={{width:'100%', height:'100%'}} src={component.src} alt={component.src}/>\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport SlideStyle from '../style/StyledSlide'\r\nimport Text from '../component/text'\r\nimport Image from '../component/image'\r\n\r\nfunction Slide({parameters, size, navigateLink, isParent})\r\n{\r\n    return (\r\n        <SlideStyle background={parameters.background} size={size} isParent={isParent}>\r\n            {(() => {\r\n                    if (!parameters.components) return null;\r\n                    return parameters.components.map((c, idx) => {\r\n                        switch (c.type) {\r\n                            case 'text'  :\r\n                                return (\r\n                                    <Text key={idx} component={c}  />\r\n                                );\r\n                            case 'image' :\r\n                                return (\r\n                                    <Image key={idx} component={c} />\r\n                                );\r\n                        }\r\n                    })\r\n                }\r\n            )()}\r\n            {parameters.storyLink ? (<button onClick={() => navigateLink(parameters.storyLink)}>LINK</button>) : null }\r\n        </SlideStyle>\r\n    );\r\n\r\n}\r\n\r\nexport default Slide;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { Impress, Step } from 'react-impressjs';\r\nimport Slide from \"./component/Slide\";\r\nimport './App.css'\r\n\r\nfunction App()\r\n{\r\n    const off          = window.innerWidth*0.4;\r\n    const screen_width = window.innerWidth;\r\n\r\n    const [slideSize, setSlideSize]       = useState('full');\r\n    const [parentStory, setParentStory]   = useState(null);\r\n    const [currentStory, setCurrentStory] = useState(null);\r\n    const [currentStoryMetadata, setCurrentStoryMetadata] = useState(null);\r\n\r\n    const navigate_link = async (storylet_id) =>\r\n    {\r\n        let response = await fetch(window.API_ENDPOINT.GET_STORYLET+'/'+storylet_id, {method: 'GET'});\r\n        let data = await response.json();\r\n\r\n        setParentStory(currentStory);\r\n        setCurrentStory(JSON.parse(data.data.story));\r\n        setSlideSize('medium');\r\n    };\r\n\r\n    useEffect(() => {\r\n        setCurrentStory(JSON.parse(window.STORY.DATA.story));\r\n        setCurrentStoryMetadata(JSON.parse(window.STORY.DATA.metadata));\r\n    }, []);\r\n\r\n    const print_parent_story = () =>\r\n    {\r\n        let slides = parentStory.map((slide, idx) =>\r\n            <Slide key={idx} parameters={slide} size={'small'} isParent={true} />\r\n        );\r\n\r\n        return (\r\n            <div className={'parentStory'} onClick={back_to_parent_story}>\r\n                <div className={'contentParentStory'}>\r\n                    {slides}\r\n                </div>\r\n                <div onClick={close_parent_story} className={'closeParentStory'}>CLOSE</div>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const print_impress_story = () =>\r\n    {\r\n        // debugger\r\n        let steps;\r\n        if(!currentStoryMetadata.viewer || currentStoryMetadata.viewer.template === \"linear\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                return (\r\n                    <Step key={idx} duration={1500} data={{x: idx === 0 ? 0 : ((screen_width-off)*idx)}}>\r\n                        <Slide key={idx} parameters={slide} size={slideSize} navigateLink={navigate_link}/>\r\n                    </Step>\r\n                )\r\n            })\r\n        }\r\n        else if(currentStoryMetadata.viewer.template === \"snail\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                if(idx < 13)\r\n                    return (\r\n                        <Step key={idx} duration={1500} data={{\r\n                            x: [-1000,0,1100,1900,2100,1800,1000,-100,-1200,-2000,-2300,0,3000][idx],\r\n                            y: [-1500,-1500,-1200,-400,700,1800,2600,2900,2600,1800,700,700,1500][idx],\r\n                            rotate: [0,0,30,60,90,120,150,180,210,240,270,720,0][idx],\r\n                            scale: [1,1,1,1,1,1,1,1,1,1,1,1,0.1][idx]\r\n                        }}>\r\n                            <Slide key={idx} parameters={slide} size=\"snail\" navigateLink={navigate_link}/>\r\n                        </Step>\r\n                    )\r\n            });\r\n            steps = steps.filter(function (el) {\r\n                return el != null;\r\n            });\r\n        }\r\n        else if(currentStoryMetadata.viewer.template === \"cube\") {\r\n            steps = currentStory.map((slide, idx) => {\r\n                if(idx < 6 )\r\n                    return (\r\n                        <Step key={idx} duration={1500} data={{x: [0,350,0,0,-350,0][idx], y: [0,0,350,-350,0,0][idx], z: [350,0,0,0,0,-350][idx], rotateX: [0,0,-90,90,0,0][idx], rotateY: [0,90,0,0,-90,-180][idx]}}>\r\n                            <Slide key={idx} parameters={slide} size=\"cube\" navigateLink={navigate_link}/>\r\n                        </Step>\r\n                    )\r\n            });\r\n            steps = steps.filter(function (el) {\r\n                return el != null;\r\n            });\r\n        }\r\n        return <Impress progress={true} fallbackMessage={<p>Error</p>} hint={false}>{steps}</Impress>;\r\n    };\r\n\r\n    const close_parent_story = () =>\r\n    {\r\n        setParentStory(null);\r\n        setSlideSize('full');\r\n    };\r\n\r\n    const back_to_parent_story = () =>\r\n    {\r\n        setCurrentStory(parentStory);\r\n        close_parent_story();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {parentStory && print_parent_story() }\r\n            {currentStory && print_impress_story() }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n"],"sourceRoot":""}