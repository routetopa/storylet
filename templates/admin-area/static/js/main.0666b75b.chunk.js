(window["webpackJsonpadmin-area"]=window["webpackJsonpadmin-area"]||[]).push([[0],{138:function(e,t,a){},189:function(e,t,a){e.exports=a(388)},337:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(138),a(38)),l=a(102),s=a(53),u=(a(194),a(390)),d=a(391),m=a(134),p=a(8),f=a(23),E=a.n(f),b=a(39),w=a(389),h=a(101),y=a(397),N=a(393),O=a(392),g=a(25),v=a(395),x=a(45),I=a.n(x),S=a(28),C=a(394),k=a(396);var P=S.a.create({name:"AddClass"})((function(e){var t=e.form,a=e.handle_submit,n=t.getFieldDecorator;return r.a.createElement(S.a,{layout:"vertical",className:"zform ant-advanced-search-form",onSubmit:function(e){e.preventDefault(),t.validateFields((function(e,t){e||a(t)}))}},r.a.createElement(S.a.Item,{label:"Classe"},n("class",{rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Sezione"},n("section",{rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Descrizione"},n("description",{rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Numero di studenti"},n("student_number",{rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(k.a,{placeholder:"1",min:1}))),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"))})),_=r.a.memo((function(e){var t=e.form,a=e.handle_submit,n=e.data,o=t.getFieldDecorator;return r.a.createElement(S.a,{layout:"vertical",className:"zform ant-advanced-search-form",onSubmit:function(e){e.preventDefault(),t.validateFields((function(e,t){e||a(t)}))}},r.a.createElement(S.a.Item,{label:"Username"},o("username",{initialValue:n.username,rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Password"},o("password",{initialValue:n.password,rules:[{required:!0,message:"Campo obbligatorio"}]})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Nome"},o("name",{initialValue:n.name})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(S.a.Item,{label:"Cognome"},o("surname",{initialValue:n.surname})(r.a.createElement(C.a,{placeholder:"placeholder"}))),r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"))})),j=S.a.create({name:"EditStudent"})(_);a(337);function A(){var e=[{title:"Username",dataIndex:"username",key:"username"},{title:"Password",dataIndex:"password",key:"password"},{title:"Nome",dataIndex:"name",key:"name"},{title:"Cognome",dataIndex:"surname",key:"surname"},{title:"Azioni",key:"action",render:function(e,t,a){return r.a.createElement("div",null,r.a.createElement(p.a,{theme:"filled",style:{fontSize:"24px",cursor:"pointer",marginRight:"24px"},type:"edit",onClick:function(){return K(t)}}),r.a.createElement(w.a,{title:"Sure to ?",onConfirm:function(){return L(t)}},r.a.createElement(p.a,{theme:"filled",style:{fontSize:"24px",cursor:"pointer"},type:"delete"})))}}],t=[{title:"Titolo",key:"name",render:function(e,t,a){return JSON.parse(t.metadata).name}},{title:"Descrizione",key:"description",render:function(e,t,a){return JSON.parse(t.metadata).description}},{title:"Username",key:"ownerId",render:function(e,t,a){var n=c.students.find((function(e){return e.userId===t.ownerId}));return"".concat(n.name," ").concat(n.surname," (").concat(n.username,")")}},{title:"Action",key:"action",render:function(e,t,a){return r.a.createElement("div",null,r.a.createElement(p.a,{theme:"filled",style:{fontSize:"24px",cursor:"pointer",marginRight:"24px"},type:"play-circle",onClick:function(){return window.open("".concat(window.API_ENDPOINT.STORYLET_VIEWER,"/").concat(t.id),"_blank")}}),r.a.createElement(h.a,{placement:"top",title:null===t.status||0===parseInt(t.status)?"Rendi pubblica":"Rendi privata"},r.a.createElement(p.a,{theme:"filled",style:{fontSize:"24px",cursor:"pointer",marginRight:"24px"},type:null===t.status||0===parseInt(t.status)?"eye":"eye-invisible",onClick:function(){return W(t)}})),r.a.createElement(w.a,{title:"Sure to ?",onConfirm:function(){return F(t)}},r.a.createElement(p.a,{theme:"filled",style:{fontSize:"24px",cursor:"pointer"},type:"delete"})))}}],a=Object(n.useState)(null),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(null),u=Object(i.a)(s,2),d=u[0],m=u[1],f=Object(n.useState)(null),x=Object(i.a)(f,2),S=x[0],C=x[1],k=Object(n.useState)(!1),_=Object(i.a)(k,2),A=_[0],T=_[1],D=Object(n.useState)(!1),R=Object(i.a)(D,2),z=R[0],U=R[1],W=function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.put("".concat(window.API_ENDPOINT.CRUD_STORYLET,"/").concat(t.id),{status:1===parseInt(t.status)?0:1},{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:if("OK"!==e.sent.data.status){e.next=11;break}return e.next=7,J();case 7:a=e.sent,(n=Object.assign({},a[c.idx])).idx=c.idx,l(n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.delete("".concat(window.API_ENDPOINT.CRUD_STORYLET,"/").concat(t.id),{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:"OK"===e.sent.data.status&&J();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){console.log("show student detail"),console.log(e),C(Object.assign({},e)),U(!0)},L=function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.delete("".concat(window.API_ENDPOINT.CRUD_STUDENT,"/").concat(t.id),{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:"OK"===e.sent.data.status&&J();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.post(window.API_ENDPOINT.CRUD_CLASS,{class:t.class,section:t.section,description:t.description,size:t.student_number},{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:"OK"===e.sent.data.status&&(T(!1),J());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.put("".concat(window.API_ENDPOINT.CRUD_STUDENT,"/").concat(S.id),{username:t.username,password:t.password,name:t.name,surname:t.surname},{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:if("OK"!==(a=e.sent).data.status){e.next=13;break}return e.next=7,J();case 7:n=e.sent,(r=Object.assign({},n[c.idx])).idx=c.idx,l(r),e.next=14;break;case 13:y.a.open({message:"Errore",description:a.data.error});case 14:U(!1),C(null);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,I.a.delete("".concat(window.API_ENDPOINT.CRUD_CLASS,"/").concat(t),{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 3:"OK"===e.sent.data.status&&console.log("deleted");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){J()}),[]);var J=function(){var e=Object(b.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get(window.API_ENDPOINT.GET_CLASS,{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 2:return t=e.sent,m(t.data.data),e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:(t=e.sent)[c.idx].idx=c.idx,l(Object.assign({},t[c.idx]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Le tue classi"),r.a.createElement("div",{className:"class-container"},d&&d.map((function(e,t){return r.a.createElement("div",{onClick:function(e){return function(e){d[e].idx=e,l(Object.assign({},d[e]))}(t)},key:"class_".concat(t),className:"class"},r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement("div",null,r.a.createElement(p.a,{theme:"filled",style:{fontSize:"64px",cursor:"pointer",marginBottom:"10px"},type:"bank"})),r.a.createElement("div",null,e.class," ",e.section),r.a.createElement("div",null,e.description),r.a.createElement(w.a,{title:"Sure to ?",onConfirm:function(t){return q(e.id)}},r.a.createElement(p.a,{theme:"filled",style:{fontSize:"18px",cursor:"pointer",position:"absolute",bottom:"12px",right:"12px"},type:"delete"}))))}))),c?r.a.createElement("div",{className:"class-detail"},r.a.createElement(N.a,{tabPosition:"top",animated:!1},r.a.createElement(N.a.TabPane,{tab:r.a.createElement("span",null,r.a.createElement(p.a,{type:"team"}),"Studenti"),key:"1"},r.a.createElement(O.a,{style:{backgroundColor:"#ffffff",padding:"16px"},dataSource:c.students,rowKey:"id",columns:e})),r.a.createElement(N.a.TabPane,{tab:r.a.createElement("span",null,r.a.createElement(p.a,{type:"highlight"}),"Storie"),key:"2"},r.a.createElement(O.a,{style:{backgroundColor:"#ffffff",padding:"16px"},dataSource:c.stories,rowKey:"id",columns:t}),r.a.createElement(g.a,{type:"primary",onClick:V,loading:!1},"Reload")))):null,r.a.createElement(p.a,{theme:"filled",style:{fontSize:"64px",position:"absolute",bottom:"20px",right:"64px",cursor:"pointer"},type:"plus-circle",onClick:function(){return T(!0)}}),r.a.createElement(v.a,{title:"Aggiungi classe",visible:A,onCancel:function(){return T(!1)},okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}}},r.a.createElement(P,{handle_submit:B})),r.a.createElement(v.a,{title:"Info Studente",visible:z,onCancel:function(){return U(!1)},okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}}},S?r.a.createElement(j,{handle_submit:X,data:S}):null))}var T=a(135);function D(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),l=Object(i.a)(c,2),s=l[0],u=l[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){var e=Object(b.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get(window.API_ENDPOINT.GET_CLASS,{headers:{"X-WP-Nonce":window.API_NONCE.NONCE}});case 2:t=e.sent,a=[],n=[],t.data.data.forEach((function(e){n=[].concat(Object(T.a)(n),Object(T.a)(e.students)),e.stories.forEach((function(e){1===parseInt(e.status)&&a.push(e)}))})),u(n),o(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=[{title:"Titolo",key:"name",render:function(e,t,a){return JSON.parse(t.metadata).name}},{title:"Descrizione",key:"description",render:function(e,t,a){return JSON.parse(t.metadata).description}},{title:"Username",key:"ownerId",render:function(e,t,a){var n=s.find((function(e){return e.userId===t.ownerId}));return"".concat(n.name," ").concat(n.surname," (").concat(n.username,")")}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Storie pubblicate"),r.a.createElement(O.a,{style:{backgroundColor:"#ffffff",padding:"16px"},dataSource:a,columns:m,rowKey:"id"}))}var R=u.a.Content,z=u.a.Footer,U=u.a.Sider;var W=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{basename:"".concat(window.API_ENDPOINT.SITE_URL,"admin-area/")},r.a.createElement(u.a,{style:{minHeight:"100vh"}},r.a.createElement(U,{collapsible:!0,collapsed:a,onCollapse:function(e){o(e)}},r.a.createElement("div",{style:{width:"100%",textAlign:"center",padding:"16px"}},r.a.createElement("div",{style:{color:"#ffffff",marginBottom:"8px"}},"Ciao ","".concat(window.USER_INFO.name," ").concat(window.USER_INFO.surname)),r.a.createElement(d.a,{size:64,icon:"user"})),r.a.createElement(m.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(m.a.Item,{key:"1"},r.a.createElement(p.a,{type:"team"}),r.a.createElement("span",null,"Classi"),r.a.createElement(l.b,{to:"/"})),r.a.createElement(m.a.Item,{key:"2"},r.a.createElement(p.a,{type:"highlight"}),r.a.createElement("span",null,"Storie pubblicate"),r.a.createElement(l.b,{to:"/stories"})))),r.a.createElement(u.a,null,r.a.createElement(R,{style:{margin:"16px"}},r.a.createElement(s.a,{exact:!0,path:"/",component:A}),r.a.createElement(s.a,{path:"/stories",component:D})),r.a.createElement(z,{style:{textAlign:"center"}},"Storylet Admin by ISISLab")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[189,1,2]]]);
//# sourceMappingURL=main.0666b75b.chunk.js.map